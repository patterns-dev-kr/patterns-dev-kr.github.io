<!DOCTYPE html><html lang="ko" data-astro-cid-sckkx6r4> <head><meta charset="utf-8"><meta content="ie=edge" http-equiv="x-ua-compatible"><meta content="initial-scale=1, maximum-scale=5, width=device-width, viewport-fit=cover" name="viewport"><meta content="er9zvCmECxtt0KP_BjDZ4WplZsNT5ApeDBK4wYD7aI0" name="google-site-verification"><meta content="eaca9475c8a73d77aa2e34ac3d3e8097cef7397d" name="naver-site-verification"><meta content="Astro v4.16.6" name="generator"><title>Patterns.dev.kr</title><link rel="canonical" href="https://patterns-dev-kr.github.io/performance-patterns/import-on-interaction/"><meta name="description" content="모던 웹 앱 디자인 패턴"><meta name="robots" content="index, follow"><meta property="og:title" content="Import On Interaction"><meta property="og:type" content="article"><meta property="og:image" content="./import-on-interaction.jpg"><meta property="og:url" content="https://patterns-dev-kr.github.io/performance-patterns/import-on-interaction/"><meta property="og:image:url" content="./import-on-interaction.jpg"><meta property="og:image:alt" content="Import On Interaction"><link crossorigin href="https://fonts.gstatic.com" rel="preconnect"><link href="/favicon.png" rel="icon" sizes="any" type="image/png"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="swap"><script src="https://www.googletagmanager.com/gtag/js?id=G-3XKKTEVFKQ" type="text/partytown"></script><script type="text/partytown">
      window.dataLayer = window.dataLayer || []
      function gtag() {
        // eslint-disable-next-line prefer-rest-params
        window.dataLayer.push(arguments)
      }
      gtag('js', new Date())
      gtag('config', 'G-3XKKTEVFKQ')
    </script><script>
      document.addEventListener('astro:page-load', () => {
        if (navigator.userAgent.indexOf('Win') > -1) {
          document.documentElement.classList.add('win')
        }
      })
    </script><link rel="stylesheet" href="/_astro/_slug_.CnWBadwT.css">
<link rel="stylesheet" href="/_astro/_slug_.OicVUOHF.css"><script type="module" src="/_astro/hoisted.4sIGGDry.js"></script>
<script>!(function(w,p,f,c){if(!window.crossOriginIsolated && !navigator.serviceWorker) return;c=w[p]=Object.assign(w[p]||{},{"lib":"/~partytown/","debug":false});c[f]=(c[f]||[]).concat(["dataLayer.push"])})(window,'partytown','forward');/* Partytown 0.10.2 - MIT builder.io */
const t={preserveBehavior:!1},e=e=>{if("string"==typeof e)return[e,t];const[n,r=t]=e;return[n,{...t,...r}]},n=Object.freeze((t=>{const e=new Set;let n=[];do{Object.getOwnPropertyNames(n).forEach((t=>{"function"==typeof n[t]&&e.add(t)}))}while((n=Object.getPrototypeOf(n))!==Object.prototype);return Array.from(e)})());!function(t,r,o,i,a,s,c,d,l,p,u=t,f){function h(){f||(f=1,"/"==(c=(s.lib||"/~partytown/")+(s.debug?"debug/":""))[0]&&(l=r.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(d=setTimeout(v,1e4),r.addEventListener("pt0",w),a?y(1):o.serviceWorker?o.serviceWorker.register(c+(s.swPath||"partytown-sw.js"),{scope:c}).then((function(t){t.active?y():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&y()}))}),console.error):v())))}function y(e){p=r.createElement(e?"script":"iframe"),t._pttab=Date.now(),e||(p.style.display="block",p.style.width="0",p.style.height="0",p.style.border="0",p.style.visibility="hidden",p.setAttribute("aria-hidden",!0)),p.src=c+"partytown-"+(e?"atomics.js?v=0.10.2":"sandbox-sw.html?"+t._pttab),r.querySelector(s.sandboxParent||"body").appendChild(p)}function v(n,o){for(w(),i==t&&(s.forward||[]).map((function(n){const[r]=e(n);delete t[r.split(".")[0]]})),n=0;n<l.length;n++)(o=r.createElement("script")).innerHTML=l[n].innerHTML,o.nonce=s.nonce,r.head.appendChild(o);p&&p.parentNode.removeChild(p)}function w(){clearTimeout(d)}s=t.partytown||{},i==t&&(s.forward||[]).map((function(r){const[o,{preserveBehavior:i}]=e(r);u=t,o.split(".").map((function(e,r,o){var a;u=u[o[r]]=r+1<o.length?u[o[r]]||(a=o[r+1],n.includes(a)?[]:{}):(()=>{let e=null;if(i){const{methodOrProperty:n,thisObject:r}=((t,e)=>{let n=t;for(let t=0;t<e.length-1;t+=1)n=n[e[t]];return{thisObject:n,methodOrProperty:e.length>0?n[e[e.length-1]]:void 0}})(t,o);"function"==typeof n&&(e=(...t)=>n.apply(r,...t))}return function(){let n;return e&&(n=e(arguments)),(t._ptf=t._ptf||[]).push(o,arguments),n}})()}))})),"complete"==r.readyState?h():(t.addEventListener("DOMContentLoaded",h),t.addEventListener("load",h))}(window,document,navigator,top,window.crossOriginIsolated);;(e=>{e.addEventListener("astro:before-swap",e=>{let r=document.body.querySelector("iframe[src*='/~partytown/']");if(r)e.newDocument.body.append(r)})})(document);</script><style>[data-astro-transition-scope="astro-mw4a64ze-1"] { view-transition-name: sidebar; }@layer astro { ::view-transition-old(sidebar) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(sidebar) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(sidebar) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(sidebar) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-mw4a64ze-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-mw4a64ze-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-mw4a64ze-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-mw4a64ze-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-mw4a64ze-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-mw4a64ze-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-mw4a64ze-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-mw4a64ze-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style></head> <body data-astro-cid-sckkx6r4> <header data-header class="fixed left-0 right-0 top-0 z-10 h-20 px-3 transition-all ease-out [&.scroll]:h-12 [&.scroll]:bg-th-bg [&.scroll]:shadow-md" data-astro-cid-3ef6ksr2> <div class="container flex h-full items-center justify-between font-lexend text-th-text" data-astro-cid-3ef6ksr2> <div class="flex items-center gap-4" data-astro-cid-3ef6ksr2> <button class="flex h-6 w-6 flex-grow-0 items-center justify-center lg:hidden" data-menu-button type="button" data-astro-cid-3ef6ksr2> <svg width="1em" height="1em" viewBox="0 0 32 32" class="text-2xl" data-astro-cid-3ef6ksr2 data-icon="carbon:menu">  <symbol id="ai:carbon:menu"><path fill="currentColor" d="M4 6h24v2H4zm0 18h24v2H4zm0-12h24v2H4zm0 6h24v2H4z"/></symbol><use xlink:href="#ai:carbon:menu"></use>  </svg> </button> <a aria-label="Go to Home" class="text-2xl font-bold leading-none text-th-text no-underline" href="/" data-astro-cid-3ef6ksr2>patterns</a> </div> <nav class="flex items-center text-sm" data-astro-cid-3ef6ksr2> <a class="relative flex items-center px-3 font-light text-th-text no-underline data-[active]:font-medium" data-active href="/" data-astro-cid-3ef6ksr2>Read</a> <a class="relative flex items-center px-3 font-light text-th-text no-underline data-[active]:font-medium" href="/about" data-astro-cid-3ef6ksr2>About</a> <custom-theme-switcher data-astro-cid-dz5h74bc> <button class="relative flex h-8 w-8 place-content-center place-items-center rounded-sm" title="Change color theme" type="button" data-astro-cid-dz5h74bc> <svg width="1em" height="1em" viewBox="0 0 24 24" data-light data-astro-cid-dz5h74bc data-icon="octicon:sun-24">  <symbol id="ai:octicon:sun-24"><path fill="currentColor" d="M12 19a7 7 0 1 1 0-14a7 7 0 0 1 0 14m0-1.5a5.5 5.5 0 1 0 0-11a5.5 5.5 0 1 0 0 11m-5.657.157a.75.75 0 0 1 0 1.06l-1.768 1.768a.749.749 0 0 1-1.275-.326a.75.75 0 0 1 .215-.734l1.767-1.768a.75.75 0 0 1 1.061 0M3.515 3.515a.75.75 0 0 1 1.06 0l1.768 1.768a.749.749 0 0 1-.326 1.275a.75.75 0 0 1-.734-.215L3.515 4.575a.75.75 0 0 1 0-1.06M12 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 12 0M4 12a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 12m8 8a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 12 20m12-8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 24 12m-6.343 5.657a.75.75 0 0 1 1.06 0l1.768 1.768a.75.75 0 0 1-.018 1.042a.75.75 0 0 1-1.042.018l-1.768-1.767a.75.75 0 0 1 0-1.061m2.828-14.142a.75.75 0 0 1 0 1.06l-1.768 1.768a.75.75 0 0 1-1.042-.018a.75.75 0 0 1-.018-1.042l1.767-1.768a.75.75 0 0 1 1.061 0"/></symbol><use xlink:href="#ai:octicon:sun-24"></use>  </svg> <svg width="1em" height="1em" viewBox="0 0 24 24" data-dark data-astro-cid-dz5h74bc data-icon="octicon:moon-24">  <symbol id="ai:octicon:moon-24"><path fill="currentColor" d="m14.768 3.96l-.002-.005a9 9 0 0 0-.218-.779c-.13-.394.21-.8.602-.67q.435.144.855.328l.01.005A10.002 10.002 0 0 1 12 22a10 10 0 0 1-9.162-5.985l-.004-.01a10 10 0 0 1-.329-.855c-.13-.392.277-.732.67-.602q.386.126.78.218l.004.002A9 9 0 0 0 14.999 6a9 9 0 0 0-.231-2.04M16.5 6c0 5.799-4.701 10.5-10.5 10.5q-.64 0-1.26-.075A8.5 8.5 0 1 0 16.425 4.74q.075.62.075 1.259Z"/></symbol><use xlink:href="#ai:octicon:moon-24"></use>  </svg> <svg width="1em" height="1em" viewBox="0 0 24 24" data-auto data-astro-cid-dz5h74bc data-icon="octicon:devices-24">  <symbol id="ai:octicon:devices-24"><path fill="currentColor" d="M1 3.75C1 2.784 1.784 2 2.75 2h18.5c.966 0 1.75.784 1.75 1.75v4a.75.75 0 0 1-1.5 0v-4a.25.25 0 0 0-.25-.25H2.75a.25.25 0 0 0-.25.25v11.5c0 .138.112.25.25.25h9a.75.75 0 0 1 0 1.5h-1.287c-.126 1.266-.564 2.445-1.223 3.5h2.51a.75.75 0 0 1 0 1.5h-4a.75.75 0 0 1-.565-1.243c.964-1.105 1.598-2.382 1.769-3.757H2.75A1.75 1.75 0 0 1 1 15.25z"/><path fill="currentColor" d="M14 11.75c0-.967.783-1.75 1.75-1.75h5.5c.966 0 1.75.783 1.75 1.75v8.5A1.75 1.75 0 0 1 21.25 22h-5.5A1.75 1.75 0 0 1 14 20.25Zm1.75-.25a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h5.5a.25.25 0 0 0 .25-.25v-8.5a.25.25 0 0 0-.25-.25Z"/></symbol><use xlink:href="#ai:octicon:devices-24"></use>  </svg> </button> </custom-theme-switcher> <script>
  // for avoid FOUC
  const loadTheme = () => {
    if (typeof localStorage === 'undefined') {
      return { preferred: 'light', theme: 'auto' }
    }

    const value = localStorage.getItem('theme')

    return {
      preferred: matchMedia('(prefers-color-scheme: light)').matches
        ? 'light'
        : 'dark',
      theme: value === 'dark' || value === 'light' ? value : 'auto',
    }
  }

  const { preferred, theme } = loadTheme()
  const {
    documentElement: { classList },
  } = document

  if (theme === 'auto') {
    classList.add('auto')
  } else {
    classList.remove('auto')
  }

  const actual = theme === 'auto' ? preferred : theme

  if (actual === 'dark') {
    classList.add('dark')
  } else {
    classList.remove('dark')
  }
</script>   </nav> </div> </header>   <main class="relative" data-astro-cid-sckkx6r4>  <div class="px-3 transition-colors"> <div class="container relative mx-auto flex justify-center pt-20 text-th-text"> <custom-sidebar data-astro-cid-ssfzsv2f> <aside aria-label="Sidebar" data-astro-cid-ssfzsv2f> <button data-menu-close type="button" data-astro-cid-ssfzsv2f> <svg width="1em" height="1em" viewBox="0 0 32 32" class="h-6 w-6" data-astro-cid-ssfzsv2f data-icon="carbon:close">  <symbol id="ai:carbon:close"><path fill="currentColor" d="M17.414 16L24 9.414L22.586 8L16 14.586L9.414 8L8 9.414L14.586 16L8 22.586L9.414 24L16 17.414L22.586 24L24 22.586z"/></symbol><use xlink:href="#ai:carbon:close"></use>  </svg> </button> <h2 class="title" data-astro-cid-ssfzsv2f>Design Patterns</h2> <ul class="list" data-astro-cid-ssfzsv2f> <li data-astro-cid-ssfzsv2f> <a href="/design-patterns/introduction" data-astro-cid-ssfzsv2f> Design Pattern 소개 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/singleton-pattern" data-astro-cid-ssfzsv2f> Singleton 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/proxy-pattern" data-astro-cid-ssfzsv2f> Proxy 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/provider-pattern" data-astro-cid-ssfzsv2f> Provider 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/prototype-pattern" data-astro-cid-ssfzsv2f> Prototype 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/container-presentational-pattern" data-astro-cid-ssfzsv2f> Container/Presentational 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/observer-pattern" data-astro-cid-ssfzsv2f> Observer 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/module-pattern" data-astro-cid-ssfzsv2f> Module 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/mixin-pattern" data-astro-cid-ssfzsv2f> Mixin 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/mediator-middleware-pattern" data-astro-cid-ssfzsv2f> Mediator/Middleware 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/hoc-pattern" data-astro-cid-ssfzsv2f> HOC 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/render-props-pattern" data-astro-cid-ssfzsv2f> Render Props 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/hooks-pattern" data-astro-cid-ssfzsv2f> Hooks 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/flyweight-pattern" data-astro-cid-ssfzsv2f> Flyweight 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/factory-pattern" data-astro-cid-ssfzsv2f> Factory 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/compound-pattern" data-astro-cid-ssfzsv2f> Compound 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/command-pattern" data-astro-cid-ssfzsv2f> Command 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/learnaing-javascript-design-patterns" data-astro-cid-ssfzsv2f> Learning JavaScript Design Patterns </a> </li> </ul> <h2 class="title" data-astro-cid-ssfzsv2f>Rendering Patterns</h2> <ul class="list" data-astro-cid-ssfzsv2f> <li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/introduction" data-astro-cid-ssfzsv2f> 소개 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/overview-of-reactjs" data-astro-cid-ssfzsv2f> Reactjs의 개요 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/overview-of-nextjs" data-astro-cid-ssfzsv2f> Nextjs의 개요 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/client-side-rendering" data-astro-cid-ssfzsv2f> 클라이언트 사이드 렌더링 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/server-side-rendering" data-astro-cid-ssfzsv2f> 서버 사이드 렌더링 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/static-rendering" data-astro-cid-ssfzsv2f> 정적 렌더링 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/incremental-static-generation" data-astro-cid-ssfzsv2f> Incremental Static Generation </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/progressive-hydration" data-astro-cid-ssfzsv2f> Progressive Hydration </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/streaming-server-side-rendering" data-astro-cid-ssfzsv2f> Streaming Server Side Rendering </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/react-server-components" data-astro-cid-ssfzsv2f> React Server Components </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/selective-hydration" data-astro-cid-ssfzsv2f> Selective Hydration </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/the-island-architecture" data-astro-cid-ssfzsv2f> The Island Architecture </a> </li> </ul> <h2 class="title" data-astro-cid-ssfzsv2f>Performance Patterns</h2> <ul class="list" data-astro-cid-ssfzsv2f> <li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/loading-sequence" data-astro-cid-ssfzsv2f> 리소스 로딩 순서 최적화 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/static-import" data-astro-cid-ssfzsv2f> Static Import </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/dynamic-import" data-astro-cid-ssfzsv2f> Dynamic Import </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/import-on-visibility" data-astro-cid-ssfzsv2f> Import On Visibility </a> </li><li class="active" data-astro-cid-ssfzsv2f> <a href="/performance-patterns/import-on-interaction" data-astro-cid-ssfzsv2f> Import On Interaction </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/route-based-splitting" data-astro-cid-ssfzsv2f> Route Based Splitting </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/bundle-splitting" data-astro-cid-ssfzsv2f> Bundle Splitting </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/prpl-pattern" data-astro-cid-ssfzsv2f> PRPL Pattern </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/tree-shaking" data-astro-cid-ssfzsv2f> Tree Shaking </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/preload" data-astro-cid-ssfzsv2f> Preload </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/prefetch" data-astro-cid-ssfzsv2f> Prefetch </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/third-parties" data-astro-cid-ssfzsv2f> Third Parties </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/list-virtualization" data-astro-cid-ssfzsv2f> List Virtualization </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/compressing-javascript" data-astro-cid-ssfzsv2f> Compressing JavaScript </a> </li> </ul> <h2 class="title" data-astro-cid-ssfzsv2f>Case Studies</h2> <ul class="list" data-astro-cid-ssfzsv2f> <li data-astro-cid-ssfzsv2f> <a href="/case-studies/airbnb-case-study" data-astro-cid-ssfzsv2f> Airbnb Case Study </a> </li><li data-astro-cid-ssfzsv2f> <a href="/case-studies/hey-com" data-astro-cid-ssfzsv2f> Hey.com </a> </li><li data-astro-cid-ssfzsv2f> <a href="/case-studies/optimizing-core-web-vitals-on-a-nextjs-app" data-astro-cid-ssfzsv2f> Optimizing Core Web Vitals on a Next.js app </a> </li> </ul> </aside> <div class="dimmed" data-astro-cid-ssfzsv2f></div> </custom-sidebar>   <div class="max-w-full flex-auto">  <div class="px-2 py-2 lg:ml-72" data-astro-cid-fzx4jmue> <h1 class="mb-4 break-all text-4xl tracking-tight" data-astro-cid-fzx4jmue>Import On Interaction</h1> <div class="mb-2" data-astro-cid-fzx4jmue> <a class="text-sm" href="https://docs.google.com/forms/d/e/1FAIpQLScQPXWUlnKvkAhf7JJMENcPywlPKMmIFCYonxEByqKNJ3lu2g/viewform?usp=pp_url&entry.2111705104=performance-patterns/import-on-interaction" rel="noreferrer" target="_blank" data-astro-cid-fzx4jmue>
📮 피드백 보내기
</a> </div> <div class="_content prose prose-stone mb-20 max-w-full dark:prose-invert prose-headings:font-semibold prose-h1:mt-20 prose-a:relative prose-a:no-underline prose-a:after:absolute prose-a:after:bottom-0 prose-a:after:left-0 prose-a:after:right-0 prose-a:after:h-[1px] prose-a:after:bg-th-text/80 prose-a:after:content-['']" data-astro-cid-fzx4jmue> <aside>📜 원문: <a href="https://www.patterns.dev/posts/import-on-interaction/" target="_blank">patterns.dev - import on interaction</a></aside>
<p><strong>요약: 중요하지 않은 리소스는 사용자 상호작용에 따라 필요해질 때 로드하도록 한다</strong></p>
<p>우리가 개발하는 사이트에는 즉시 필요하지 않는 코드나 데이터들이 포함되어 있을 수 있다. 예를 들어 UI의 어떤 부분은 사용자가 클릭하거나 스크롤하여 보여지기 전 까지는 필요없을 수 있다. 이는 개발자가 퍼스트 파티(직접 개발한) 코드에 대해 적용할수도 있지만 비디오 플레이어나 채팅 위젯 등 메인 UI가 보이기 위해 클릭을 해야하는 서드파티 코드들에 적용할 수 있다.</p>
<p>이런 파싱 및 실행 비용이 높은 리소스들을 즉시 불러올 경우 <a href="https://web.dev/long-tasks-devtools/">메인 스레드를 블록</a>할 수 있으며 사용자에게 중요한 영역이 상호작용 가능해지기까지의 시간을 지연시킬 수 있다. 이는 성능 주요 지표에 해당하는 <a href="https://web.dev/fid/">First Input Delay</a>, <a href="https://web.dev/lighthouse-total-blocking-time/">Total Blocking Time</a>, <a href="https://web.dev/interactive/">Time to Interactive</a>에 영향을 줄 수 있다. 이런 리소스들을 즉시 로드하는 대신, 아래의 상황에 로드하도록 할 수 있다.</p>
<ul>
<li>사용자가 컴포넌트에 처음 클릭했을 때</li>
<li>스크롤하여 컴포넌트가 뷰포트에 들어왔을 때</li>
<li>또는 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/requestIdleCallback">requestIdleCallback</a> 을 통해 브라우저가 프로세스가 유휴 상태일 때</li>
</ul>
<p>리소스를 불러오는 방법들을 고 수준에서 정리해 보자면:</p>
<ul>
<li>Eager - 리소스를 즉시 불러옴 (스크립트를 불러오는 일반적인 방법)</li>
<li>Lazy (<a href="https://web.dev/code-splitting-with-dynamic-imports-in-nextjs/#route-based-and-component-based-code-splitting">Route-based</a>) - 특정 경로를 탐색할 때 로드한다</li>
<li>Lazy (On interaction) - 사용자가 UI를 클릭했을 때 불러온다 (예를 들면 “채팅 시작하기”)</li>
<li>Lazy (In viewport) - 사용자가 스크롤을 움직여 컴포넌트가 뷰포트에 들어올 때 로드한다</li>
<li><a href="https://web.dev/link-prefetch/">Prefetch</a> - 우선순위를 높여 로드하되, 중요한 리소스보다는 늦게 로드되도록 한다</li>
<li><a href="https://web.dev/preload-critical-assets/">Preload</a> - 중요 리소스로 지정하여 즉시 받도록 한다</li>
</ul>
<p>참고: 퍼스트 파티 코드를 상호작용 발생 시 동적으로 로드하게 하는 것은. 상호작용 전에 리소스를 미리 불러올 수 없는 경우에만 적용해야 한다. 이 패턴은 주로 서드파티 코드들을 지연 로딩하는데 적용한다. 지연로딩을 시작하는 기준은 상호작용 시작 전까지 미루거나, 브라우저 프로세스가 유휴 상태일때까지 미루거나 기타 다른 기준들을 사용할 수 있다.</p>
<p>여러 상황에 일부 기능에 대한 코드를 지연 로딩하는 것에 대해서는 이 글에서 이어서 다룰 것이다. Google Docs를 사용했다면 아마 이 기능을 경험해보았을 것이다. Google Docs는 인터렉션 발생까지 스크립트 로딩을 지연시켜 초기 스크립트의 크기 중 500KB를 절약할 수 있었다.</p>
<img  src="/_astro/inport-on-interaction01.DiEPt9Pb_2KmVX.webp" alt="" width="1280" height="918" loading="lazy" decoding="async">
<p>이 패턴을 적용하기 좋은 또 다른 곳은 서드파티 위젯을 로드하는 곳이다.</p>
<h2 id="파사드-ui를-활용하여-서드파티-모듈을-지연로딩하기">파사드 UI를 활용하여 서드파티 모듈을 지연로딩하기</h2>
<p>서드파티 코드를 불러오는 도중에는 해당 코드에 대해서 아직 완전한 제어를 할 수 없는 경우가 있다. 이 때 상호작용 시 로드 패턴을 적용하기 위한 방법 중 하나는 파사드 UI를 활용하는 방법이다. 파사드 UI는 실제 컴포넌트의 기본 동작만을 구현한 경량 컴포넌트 혹은 더 단순하게 스크린샷을 쓰는 단순한 “프리뷰” 혹은 “플레이스홀더”이다. Lighthouse팀에서 일할 때 떠올랐던 아이디어에 대한 용어였다</p>
<aside>💡역자 주: Addy 본인이 <a href="https://chrome.google.com/webstore/detail/lighthouse/blipmdconlkpinefehnmjammfjpmpbjk" target="_blank" rel="noreferrer">Chrome Lighthouse</a> 소속되어있을 때의 이야기로 보인다.</aside>
<p>사용자가 “프리뷰”(파사드 UI) 를 클릭할 때 코드를 포함한 리소스를 불러오기 시작한다. 사용자는 해당 기능을 사용하기 위해 비용을 조금 더 사용해야 한다. 또 파사드 UI는 <a href="https://web.dev/uses-rel-preconnect/">preconnect</a> 속성을 이용해 마우스 호버 시점에 가져오게 할 수도 있다.</p>
<p>참고: 서드파티 리소스들은 전반적인 사이트 로딩 속도에 어떤 영향을 줄 지 고려하지 않고 코드베이스에 추가되곤 한다. 서드파티 스크립트를 동기적으로 로드하면 브라우저 파서를 블락하고 hydration을 지연시킬 수 있다. 가능하다면 3P(서드파티) 스크립트는 async나 defer (또는 다른 방법들)을 활용하여 1P(퍼스트파티) 코드들이 로드되는것을 방해하지 않도록 하자. 하지만 그 서드파티 코드들이 중요하다면 이 글에서 다루는 상호작용 시 로드 패턴과 같은 지연 로딩 패턴을 적용하는것을 추천한다.</p>
<h2 id="비디오-플레이어-임베드">비디오 플레이어 임베드</h2>
<p>파사드 UI의 좋은 예시는 Paul Irish의 <a href="https://github.com/paulirish/lite-youtube-embed">YouTube Lite Embed</a> 이다. 해당 라이브러리는 YouTube 비디오 ID를 받아 최소한의 썸네일과 플레이 버튼을 렌더하는 커스텀 엘리먼트를 제공한다. 이 엘리먼트를 클릭하면 YouTube의 임베드 코드를 그때서야 로드하기 시작하고. 이는 사용자가 플레이버튼을 누르지 않으면 불필요한 리소스 비용을 소비하지 않아도 된 다는 이야기이다.</p>
<img  src="/_astro/inport-on-interaction02.AY4_03lQ_Z1wm5z8.webp" alt="" width="1280" height="833" loading="lazy" decoding="async">
<p>동일한 기법이 몇몇 구글 사이트에도 적용되어 있다. android.com에서는 YouTube의 임베드 코드를 즉시 로드하지 않고 썸네일과 플레이 버튼을 가진 컴포넌트를 렌더한 뒤 사용자가 클릭하면 풀 페이지 모달로 비디오를 보여주도록 개발되어 있다.</p>
<img  src="/_astro/import-on-interaction03.C0o448IJ_Zql50d.webp" alt="" width="1280" height="833" loading="lazy" decoding="async">
<h2 id="인증">인증</h2>
<p>앱을 개발하다 보면 클라이언트 사이드 JavaScript SDK를 이용하여 인증을 지원해야 하는 경우가 있다. 이 때 사용자가 로그인 페이지에 진입하지 않아도 이를 로드하게 하면 무거운 JS를 다운받게 되며 그에 따른 비용이 사용된다. 이런 인증 SDK들을 사용자가 로그인 버튼을 누를 때 다운로드 받게 하여 메인 스레드를 블록하지 않도록 하자.</p>
<img  src="/_astro/import-on-interaction04.BRbBuPqv_dtRk.webp" alt="" width="1280" height="833" loading="lazy" decoding="async">
<h2 id="채팅-위젯">채팅 위젯</h2>
<p>Calibre앱은 위에서 소개한 파사드 UI와 유사한 기법을 적용하여 <a href="https://calibreapp.com/blog/fast-live-chat">고객상담 라이브 채팅의 성능을 30%이상 개선</a>할 수 있었다. HTML과 CSS만 포함한 “가짜” 라이브 챗 버튼을 구현하였고 이를 클릭하면 고객상담 채팅 번들을 다운로드하도록 구현하였다.</p>
<img  src="/_astro/import-on-interaction05.Be4_4NX4_1oXdJk.webp" alt="" width="1280" height="833" loading="lazy" decoding="async">
<p><a href="https://wildbit.com/blog/getting-postmark-lighthouse-performance-score-to-100">Postmark</a>는 사용자가 가끔 사용하는 도움 채팅 기능을 페이지 로드 즉시 로드하고 있었다. 해당 위젯의 스크립트는 314KB에 육박했으며 웹 사이트의 번들보다 크기가 컸다. 사용자 경험을 개선하기 위해 이 위젯을 HTML과 CSS만 포함한 가짜 엘리먼트로 대체하고, 실제로 클릭이 이뤄졌을 때 로드하도록 하였다. 이는 TTI를 7.7초에서 3.7초로 감소시켰다.</p>
<img  src="/_astro/import-on-interaction06.DSH5ymlR_Oh8jF.webp" alt="" width="1280" height="833" loading="lazy" decoding="async">
<h2 id="기타-사례">기타 사례</h2>
<p><a href="https://medium.com/ne-digital/how-to-reduce-next-js-bundle-size-68f7ac70c375">Ne-digital</a> 사이트는 “맨 위로”버튼의 기능을 위헤 서드파티 라이브러리를 사용하고 있었다. 이를 즉시 로드하지 않고. 사용자가 버튼을 클릭할 때 로드하여 스크롤을 맨 위로 올리도록 하여 ~7KB 정도를 절약할 수 있었다.</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#89B4FA;font-style:italic">handleScrollToTop</span><span style="color:#CDD6F4">() </span><span style="color:#9399B2">{</span></span>
<span class="line"><span style="color:#94E2D5">  import</span><span style="color:#CDD6F4">(</span><span style="color:#A6E3A1">'react-scroll'</span><span style="color:#CDD6F4">)</span><span style="color:#94E2D5">.</span><span style="color:#89B4FA;font-style:italic">then</span><span style="color:#CDD6F4">(</span><span style="color:#EBA0AC;font-style:italic">scroll</span><span style="color:#CBA6F7"> =></span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CDD6F4">    scroll</span><span style="color:#94E2D5">.</span><span style="color:#CDD6F4">animateScroll</span><span style="color:#94E2D5">.</span><span style="color:#89B4FA;font-style:italic">scrollToTop</span><span style="color:#CDD6F4">(</span><span style="color:#9399B2">{</span></span>
<span class="line"><span style="color:#9399B2">  }</span><span style="color:#CDD6F4">)</span></span>
<span class="line"><span style="color:#9399B2">}</span></span>
<span class="line"></span></code></pre>
<img  src="/_astro/import-on-interaction07.CXWzPeTb_Z1k1Kza.webp" alt="" width="640" height="290" loading="lazy" decoding="async">
<hr>
<h2 id="상호작용-시-불러오기는-어떻게-구현할-수-있지">상호작용 시 불러오기는 어떻게 구현할 수 있지?</h2>
<h3 id="바닐라-자바스크립트">바닐라 자바스크립트</h3>
<p>자바스크립트에서는 <a href="https://v8.dev/features/dynamic-import">dynamic import()</a>를 사용하면 모듈을 지연로딩할 수 있으며 프로미스를 반환한다. 제대로 적용하기만 하면 꽤 효과를 볼 수 있다. 아래 예제는 사용자가 버튼을 클릭했을 때 lodash의 sortby를 로드하여 사용하고 있다.</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#CBA6F7">const</span><span style="color:#CDD6F4"> btn </span><span style="color:#94E2D5">=</span><span style="color:#CDD6F4"> document</span><span style="color:#94E2D5">.</span><span style="color:#89B4FA;font-style:italic">querySelector</span><span style="color:#CDD6F4">(</span><span style="color:#A6E3A1">'button'</span><span style="color:#CDD6F4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CDD6F4">btn</span><span style="color:#94E2D5">.</span><span style="color:#89B4FA;font-style:italic">addEventListener</span><span style="color:#CDD6F4">(</span><span style="color:#A6E3A1">'click'</span><span style="color:#9399B2">,</span><span style="color:#EBA0AC;font-style:italic"> e</span><span style="color:#CBA6F7"> =></span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CDD6F4">  e</span><span style="color:#94E2D5">.</span><span style="color:#89B4FA;font-style:italic">preventDefault</span><span style="color:#CDD6F4">()</span></span>
<span class="line"><span style="color:#94E2D5">  import</span><span style="color:#CDD6F4">(</span><span style="color:#A6E3A1">'lodash.sortby'</span><span style="color:#CDD6F4">)</span></span>
<span class="line"><span style="color:#94E2D5">    .</span><span style="color:#89B4FA;font-style:italic">then</span><span style="color:#CDD6F4">(</span><span style="color:#EBA0AC;font-style:italic">module</span><span style="color:#CBA6F7"> =></span><span style="color:#CBA6F7;font-style:italic"> module</span><span style="color:#94E2D5">.</span><span style="color:#CDD6F4">default)</span></span>
<span class="line"><span style="color:#94E2D5">    .</span><span style="color:#89B4FA;font-style:italic">then</span><span style="color:#CDD6F4">(</span><span style="color:#89B4FA;font-style:italic">sortInput</span><span style="color:#CDD6F4">()) </span><span style="color:#6C7086;font-style:italic">// use the imported dependency</span></span>
<span class="line"><span style="color:#94E2D5">    .</span><span style="color:#89B4FA;font-style:italic">catch</span><span style="color:#CDD6F4">(</span><span style="color:#EBA0AC;font-style:italic">err</span><span style="color:#CBA6F7"> =></span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CDD6F4">      console</span><span style="color:#94E2D5">.</span><span style="color:#89B4FA;font-style:italic">log</span><span style="color:#CDD6F4">(err)</span></span>
<span class="line"><span style="color:#9399B2">    }</span><span style="color:#CDD6F4">)</span></span>
<span class="line"><span style="color:#9399B2">}</span><span style="color:#CDD6F4">)</span></span>
<span class="line"></span></code></pre>
<p>dynamic import를 사용할 수 없었거나 사용하기 애매한 경우 스크립트 태그 자체를 동적으로 페이지에 포함하는 방법이 있다. 이를 위해 프로미스 기반 스크립트 로더를 사용할 수 있다. (<a href="https://glitch.com/edit/#!/tree-fluffy-stop">프로미스 기반 스크립트 로더의 전체 구현</a>에서는 로그인 파사드의 예시도 구현되어 있다.)</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#CBA6F7">const</span><span style="color:#CDD6F4"> loginBtn </span><span style="color:#94E2D5">=</span><span style="color:#CDD6F4"> document</span><span style="color:#94E2D5">.</span><span style="color:#89B4FA;font-style:italic">querySelector</span><span style="color:#CDD6F4">(</span><span style="color:#A6E3A1">'#login'</span><span style="color:#CDD6F4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CDD6F4">loginBtn</span><span style="color:#94E2D5">.</span><span style="color:#89B4FA;font-style:italic">addEventListener</span><span style="color:#CDD6F4">(</span><span style="color:#A6E3A1">'click'</span><span style="color:#9399B2">,</span><span style="color:#9399B2"> ()</span><span style="color:#CBA6F7"> =></span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CBA6F7">  const</span><span style="color:#CDD6F4"> loader </span><span style="color:#94E2D5">=</span><span style="color:#CBA6F7;font-weight:bold"> new</span><span style="color:#89B4FA;font-style:italic"> scriptLoader</span><span style="color:#CDD6F4">()</span></span>
<span class="line"><span style="color:#CDD6F4">  loader</span></span>
<span class="line"><span style="color:#94E2D5">    .</span><span style="color:#89B4FA;font-style:italic">load</span><span style="color:#CDD6F4">([</span><span style="color:#A6E3A1">'//apis.google.com/js/client:platform.js?onload=showLoginScreen'</span><span style="color:#CDD6F4">])</span></span>
<span class="line"><span style="color:#94E2D5">    .</span><span style="color:#89B4FA;font-style:italic">then</span><span style="color:#CDD6F4">(</span><span style="color:#9399B2">({</span><span style="color:#EBA0AC;font-style:italic"> length</span><span style="color:#9399B2"> })</span><span style="color:#CBA6F7"> =></span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CDD6F4">      console</span><span style="color:#94E2D5">.</span><span style="color:#89B4FA;font-style:italic">log</span><span style="color:#CDD6F4">(</span><span style="color:#A6E3A1">`</span><span style="color:#9399B2">${</span><span style="color:#CDD6F4">length</span><span style="color:#9399B2">}</span><span style="color:#A6E3A1"> scripts loaded!`</span><span style="color:#CDD6F4">)</span></span>
<span class="line"><span style="color:#9399B2">    }</span><span style="color:#CDD6F4">)</span></span>
<span class="line"><span style="color:#9399B2">}</span><span style="color:#CDD6F4">)</span></span>
<span class="line"></span></code></pre>
<h3 id="react">React</h3>
<p><code>&#x3C;MessageList></code>, <code>&#x3C;MessageInput></code>, <code>&#x3C;EmojiPicker></code>로 구성된 채팅 앱이 있다고 가정해 보자 (<a href="https://bundlephobia.com/result?p=emoji-mart@3.0.0">emoji-mart</a>를 사용했다. minified 하고 gzipped 되면 98KB정도의 크기이다). 페이지 진입과 동시에 모든 컴포넌트를 로드할 수 있다.</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto;" tabindex="0" data-language="jsx"><code><span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> MessageList </span><span style="color:#CBA6F7">from</span><span style="color:#A6E3A1"> './MessageList'</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> MessageInput </span><span style="color:#CBA6F7">from</span><span style="color:#A6E3A1"> './MessageInput'</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> EmojiPicker </span><span style="color:#CBA6F7">from</span><span style="color:#A6E3A1"> './EmojiPicker'</span><span style="color:#9399B2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">const</span><span style="color:#89B4FA;font-style:italic"> Channel</span><span style="color:#94E2D5"> =</span><span style="color:#9399B2"> ()</span><span style="color:#CBA6F7"> =></span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#94E2D5">  ...</span></span>
<span class="line"><span style="color:#CBA6F7">  return</span><span style="color:#CDD6F4"> (</span></span>
<span class="line"><span style="color:#94E2D5">    &#x3C;</span><span style="color:#89B4FA">div</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#94E2D5">      &#x3C;</span><span style="color:#F5C2E7">MessageList</span><span style="color:#94E2D5"> /></span></span>
<span class="line"><span style="color:#94E2D5">      &#x3C;</span><span style="color:#F5C2E7">MessageInput</span><span style="color:#94E2D5"> /></span></span>
<span class="line"><span style="color:#9399B2">      {</span><span style="color:#CDD6F4">emojiPickerOpen </span><span style="color:#94E2D5">&#x26;&#x26;</span><span style="color:#94E2D5"> &#x3C;</span><span style="color:#F5C2E7">EmojiPicker</span><span style="color:#94E2D5"> /></span><span style="color:#9399B2">}</span></span>
<span class="line"><span style="color:#94E2D5">    &#x3C;/</span><span style="color:#89B4FA">div</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#CDD6F4">  )</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#9399B2">};</span></span>
<span class="line"></span></code></pre>
<img  src="/_astro/import-on-interaction08.CDdr8Yz1_ZLbU91.webp" alt="" width="1280" height="644" loading="lazy" decoding="async">
<p><a href="https://web.dev/reduce-javascript-payloads-with-code-splitting/">코드 스플리팅</a>을 통해 전체 로드를 분리시키는것은 꽤 간단하다. <code>React.lazy</code> 는 React앱 내의 컴포넌트 레벨에서 dynamic import를 적용해 코드를 나눌 수 있게 해 준다. 개발자는 로딩에 관련된 상태만 신경쓰고 이를 <code>Suspense</code> 컴포넌트와 잘 연결해주기만 하면 된다.</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto;" tabindex="0" data-language="jsx"><code><span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> React</span><span style="color:#9399B2">,</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> lazy</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> Suspense </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> 'react'</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> MessageList </span><span style="color:#CBA6F7">from</span><span style="color:#A6E3A1"> './MessageList'</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> MessageInput </span><span style="color:#CBA6F7">from</span><span style="color:#A6E3A1"> './MessageInput'</span><span style="color:#9399B2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">const</span><span style="color:#CDD6F4"> EmojiPicker </span><span style="color:#94E2D5">=</span><span style="color:#89B4FA;font-style:italic"> lazy</span><span style="color:#CDD6F4">(</span></span>
<span class="line"><span style="color:#9399B2">  ()</span><span style="color:#CBA6F7"> =></span><span style="color:#94E2D5"> import</span><span style="color:#CDD6F4">(</span><span style="color:#A6E3A1">'./EmojiPicker'</span><span style="color:#CDD6F4">)</span></span>
<span class="line"><span style="color:#CDD6F4">)</span><span style="color:#9399B2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">const</span><span style="color:#89B4FA;font-style:italic"> Channel</span><span style="color:#94E2D5"> =</span><span style="color:#9399B2"> ()</span><span style="color:#CBA6F7"> =></span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#94E2D5">  ...</span></span>
<span class="line"><span style="color:#CBA6F7">  return</span><span style="color:#CDD6F4"> (</span></span>
<span class="line"><span style="color:#94E2D5">    &#x3C;</span><span style="color:#89B4FA">div</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#94E2D5">      &#x3C;</span><span style="color:#F5C2E7">MessageList</span><span style="color:#94E2D5"> /></span></span>
<span class="line"><span style="color:#94E2D5">      &#x3C;</span><span style="color:#F5C2E7">MessageInput</span><span style="color:#94E2D5"> /></span></span>
<span class="line"><span style="color:#9399B2">      {</span><span style="color:#CDD6F4">emojiPickerOpen </span><span style="color:#94E2D5">&#x26;&#x26;</span><span style="color:#CDD6F4"> (</span></span>
<span class="line"><span style="color:#94E2D5">        &#x3C;</span><span style="color:#F5C2E7">Suspense</span><span style="color:#F9E2AF"> fallback</span><span style="color:#94E2D5">=</span><span style="color:#9399B2">{</span><span style="color:#94E2D5">&#x3C;</span><span style="color:#89B4FA">div</span><span style="color:#94E2D5">></span><span style="color:#CDD6F4">Loading...</span><span style="color:#94E2D5">&#x3C;/</span><span style="color:#89B4FA">div</span><span style="color:#94E2D5">></span><span style="color:#9399B2">}</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#94E2D5">          &#x3C;</span><span style="color:#F5C2E7">EmojiPicker</span><span style="color:#94E2D5"> /></span></span>
<span class="line"><span style="color:#94E2D5">        &#x3C;/</span><span style="color:#F5C2E7">Suspense</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#CDD6F4">      )</span><span style="color:#9399B2">}</span></span>
<span class="line"><span style="color:#94E2D5">    &#x3C;/</span><span style="color:#89B4FA">div</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#CDD6F4">  )</span><span style="color:#9399B2">;</span></span>
<span class="line"><span style="color:#9399B2">};</span></span>
<span class="line"></span></code></pre>
<p>또 앱 초기화 때 전체를 로드하게 하지 말고, 이 방식을 <code>&#x3C;MessageInput></code>이 클릭되었을 때 로드되도록 적용할수도 있다.</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto;" tabindex="0" data-language="jsx"><code><span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> React</span><span style="color:#9399B2">,</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> useState</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> createElement </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> 'react'</span></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> MessageList </span><span style="color:#CBA6F7">from</span><span style="color:#A6E3A1"> './MessageList'</span></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> MessageInput </span><span style="color:#CBA6F7">from</span><span style="color:#A6E3A1"> './MessageInput'</span></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> ErrorBoundary </span><span style="color:#CBA6F7">from</span><span style="color:#A6E3A1"> './ErrorBoundary'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">const</span><span style="color:#89B4FA;font-style:italic"> Channel</span><span style="color:#94E2D5"> =</span><span style="color:#9399B2"> ()</span><span style="color:#CBA6F7"> =></span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CBA6F7">  const</span><span style="color:#9399B2"> [</span><span style="color:#CDD6F4">emojiPickerEl</span><span style="color:#9399B2">,</span><span style="color:#CDD6F4"> setEmojiPickerEl</span><span style="color:#9399B2">]</span><span style="color:#94E2D5"> =</span><span style="color:#89B4FA;font-style:italic"> useState</span><span style="color:#CDD6F4">(</span><span style="color:#CBA6F7">null</span><span style="color:#CDD6F4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">  const</span><span style="color:#89B4FA;font-style:italic"> openEmojiPicker</span><span style="color:#94E2D5"> =</span><span style="color:#9399B2"> ()</span><span style="color:#CBA6F7"> =></span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">    import</span><span style="color:#CDD6F4">(</span><span style="color:#6C7086;font-style:italic">/* webpackChunkName: "emoji-picker" */</span><span style="color:#A6E3A1"> './EmojiPicker'</span><span style="color:#CDD6F4">)</span></span>
<span class="line"><span style="color:#94E2D5">      .</span><span style="color:#89B4FA;font-style:italic">then</span><span style="color:#CDD6F4">(</span><span style="color:#EBA0AC;font-style:italic">module</span><span style="color:#CBA6F7"> =></span><span style="color:#CBA6F7;font-style:italic"> module</span><span style="color:#94E2D5">.</span><span style="color:#CDD6F4">default)</span></span>
<span class="line"><span style="color:#94E2D5">      .</span><span style="color:#89B4FA;font-style:italic">then</span><span style="color:#CDD6F4">(</span><span style="color:#EBA0AC;font-style:italic">emojiPicker</span><span style="color:#CBA6F7"> =></span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">        setEmojiPickerEl</span><span style="color:#CDD6F4">(</span><span style="color:#89B4FA;font-style:italic">createElement</span><span style="color:#CDD6F4">(emojiPicker))</span></span>
<span class="line"><span style="color:#9399B2">      }</span><span style="color:#CDD6F4">)</span></span>
<span class="line"><span style="color:#9399B2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">  const</span><span style="color:#89B4FA;font-style:italic"> closeEmojiPickerHandler</span><span style="color:#94E2D5"> =</span><span style="color:#9399B2"> ()</span><span style="color:#CBA6F7"> =></span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">    setEmojiPickerEl</span><span style="color:#CDD6F4">(</span><span style="color:#CBA6F7">null</span><span style="color:#CDD6F4">)</span></span>
<span class="line"><span style="color:#9399B2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">  return</span><span style="color:#CDD6F4"> (</span></span>
<span class="line"><span style="color:#94E2D5">    &#x3C;</span><span style="color:#F5C2E7">ErrorBoundary</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#94E2D5">      &#x3C;</span><span style="color:#89B4FA">div</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#94E2D5">        &#x3C;</span><span style="color:#F5C2E7">MessageList</span><span style="color:#94E2D5"> /></span></span>
<span class="line"><span style="color:#94E2D5">        &#x3C;</span><span style="color:#F5C2E7">MessageInput</span><span style="color:#F9E2AF"> onClick</span><span style="color:#94E2D5">=</span><span style="color:#9399B2">{</span><span style="color:#CDD6F4">openEmojiPicker</span><span style="color:#9399B2">}</span><span style="color:#94E2D5"> /></span></span>
<span class="line"><span style="color:#9399B2">        {</span><span style="color:#CDD6F4">emojiPickerEl</span><span style="color:#9399B2">}</span></span>
<span class="line"><span style="color:#94E2D5">      &#x3C;/</span><span style="color:#89B4FA">div</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#94E2D5">    &#x3C;/</span><span style="color:#F5C2E7">ErrorBoundary</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#CDD6F4">  )</span></span>
<span class="line"><span style="color:#9399B2">}</span></span>
<span class="line"></span></code></pre>
<img  src="/_astro/import-on-interaction09.CAUn4hjO_qBj3w.webp" alt="" width="1280" height="711" loading="lazy" decoding="async">
<h3 id="vue">Vue</h3>
<p>뷰에서는 상호작용 시 불러오기를 다양한 방법으로 적용할 수 있다. <code>EmojiPicker</code>를 동적으로 불러오도록 하기 위해 이를 다음처럼 동적 로딩 함수로 감쌀 수 있다. <code>() => import("./EmojiPicker")</code>. 이렇게 하면 뷰는 렌더해야할 때 컴포넌트를 지연로딩하도록 동작한다.</p>
<p>또 사용자 인터렉션 발생 시에 로드하도록 하려면 피커의 부모 엘리먼트에 <code>v-if</code> 디렉티브를 사용하면 된다. 사용자가 버튼을 클릭하면 조건문의 값을 만족시켜 동적으로 불러온 후 렌더링하도록 하는 것이다.</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#94E2D5">&#x3C;</span><span style="color:#89B4FA">template</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#94E2D5">  &#x3C;</span><span style="color:#89B4FA">div</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#94E2D5">    &#x3C;</span><span style="color:#89B4FA">button</span><span style="color:#F9E2AF"> @click</span><span style="color:#94E2D5">=</span><span style="color:#A6E3A1">"show = true"</span><span style="color:#94E2D5">></span><span style="color:#CDD6F4">Load Emoji Picker</span><span style="color:#94E2D5">&#x3C;/</span><span style="color:#89B4FA">button</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#94E2D5">    &#x3C;</span><span style="color:#89B4FA">div</span><span style="color:#F9E2AF"> v-if</span><span style="color:#94E2D5">=</span><span style="color:#A6E3A1">"show"</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#94E2D5">      &#x3C;</span><span style="color:#89B4FA">emojipicker</span><span style="color:#94E2D5">>&#x3C;/</span><span style="color:#89B4FA">emojipicker</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#94E2D5">    &#x3C;/</span><span style="color:#89B4FA">div</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#94E2D5">  &#x3C;/</span><span style="color:#89B4FA">div</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#94E2D5">&#x3C;/</span><span style="color:#89B4FA">template</span><span style="color:#94E2D5">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#94E2D5">&#x3C;</span><span style="color:#89B4FA">script</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#CBA6F7">  export</span><span style="color:#CBA6F7"> default</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">    data</span><span style="color:#94E2D5">:</span><span style="color:#9399B2"> ()</span><span style="color:#CBA6F7"> =></span><span style="color:#CDD6F4"> (</span><span style="color:#9399B2">{</span><span style="color:#CDD6F4"> show</span><span style="color:#94E2D5">:</span><span style="color:#FAB387"> false</span><span style="color:#9399B2"> }</span><span style="color:#CDD6F4">)</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#CDD6F4">    components</span><span style="color:#94E2D5">:</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">      Emojipicker</span><span style="color:#94E2D5">:</span><span style="color:#9399B2"> ()</span><span style="color:#CBA6F7"> =></span><span style="color:#94E2D5"> import</span><span style="color:#CDD6F4">(</span><span style="color:#A6E3A1">'./Emojipicker'</span><span style="color:#CDD6F4">)</span><span style="color:#9399B2">,</span></span>
<span class="line"><span style="color:#9399B2">    },</span></span>
<span class="line"><span style="color:#9399B2">  }</span></span>
<span class="line"><span style="color:#CDD6F4">&#x3C;</span><span style="color:#94E2D5">/</span><span style="color:#89B4FA">script</span><span style="color:#94E2D5">></span></span>
<span class="line"></span></code></pre>
<p>상호작용 시 불러오기 패턴은 <a href="https://www.johnpapa.net/angular-9-lazy-loading-components/">Angular</a>를 포함하여 동적 로딩을 지원하는 프레임웍에서는 대부분 적용할 수 있다.</p>
<hr>
<h2 id="퍼스트-파티-코드에-상호작용-시-불러오기를-적용하여-점진적-로딩-구현하기">퍼스트 파티 코드에 상호작용 시 불러오기를 적용하여 점진적 로딩 구현하기</h2>
<p>상호작용 시 코드를 불러오는 패턴은 구글이 항공권 예약이나 사진 앱과 같은 규모가 큰 앱에 점진적 로딩을 적용하는데 있어 매우 중요하다. 이를 설명하기 위해 이전 글에서 소개했던 Shubhie Panicker의 예제에 대하여 이야기 해 보자.</p>
<p>사용자가 인도의 뭄바이를 여행할 때 묵을 호텔의 가격을 구글에서 본다고 생각해 보자. 이 상호작용을 위한 리소스들은 당연히 필요하겠지만 아직 장소를 정하지 않았다면 지도 기능을 위한 HTML/CSS/JS는 아직 필요가 없을 것이다.</p>
<img  src="/_astro/import-on-interaction10.Dh9IWowy_ZSEc1u.webp" alt="" width="1280" height="742" loading="lazy" decoding="async">
<p>이 때 리소스를 다운로드하는 시나리오를 간단하게 하기 위해. 구글 호텔이 단순하게 <a href="https://developers.google.com/web/updates/2019/02/rendering-on-the-web#csr">클라이언트 측 렌더링</a> (CSR)을 적용했다고 하자. 화면을 출력하기 위해 모든 코드를 다운로드받아야 한다: 한번의 렌더링을 위해 HTML, JS, CSS를 모두 받아야 한다. 그러나 이는 사용자로 하여금 화면에 무언가 보이기 까지 너무 오랜 시간을 기다리게 할 수 있다. JS 와 CSS의 대부분은 필요하지 않을 수 있다.</p>
<img  src="/_astro/import-on-interaction11.BntFGgt8_Z2hVe53.webp" alt="" width="1690" height="934" loading="lazy" decoding="async">
<p>다음으로는 이를 <a href="https://developers.google.com/web/updates/2019/02/rendering-on-the-web#server-vs-static">서버측 렌더링</a> (SSR)으로 구현했다고 생각해 보자. 사용자가 뭔가를 더 빨리 볼 수 있도록 해 주었다. 하지만 추가적인 데이터 다운로드와 클라이언트 측에서 hydration이 끝나기 전 까지 사용자는 아무런 상호작용을 할 수 없다.</p>
<img  src="/_astro/import-on-interaction12.ClmVC0sT_KlPB5.webp" alt="" width="1680" height="938" loading="lazy" decoding="async">
<p>SSR이 그나마 좀 낫지만, 사용자는 일종의 불쾌한 골짜기를 느낄 수 있다. 페이지가 렌더되어 준비가 끝난것 처럼 보이지만 어느것도 탭할 수 없다. 때때로 이는 사용자가 클릭을 여러번 시도하다가 안되는 것을 깨닫고 포기하는 상황에 이를 수 있다.</p>
<p>위의 구글 호텔 예제로 돌아가서 UI을 조금 더 자세히 들여다보면. 사용자가 원하는 호텔을 찾기 위해 “more filters”를 클릭하면 관련된 코드를 다운로드하기 시작하는 것을 알 수 있다.</p>
<p><strong>초기에는 필수적인 코드만 다운로드하도록 하고 이후에 유저의 인터렉션을 보며 추가적으로 다운로드하게 한다.</strong></p>
<p>이 로딩 시나리오를 조금 더 자세히 들여다 보자.</p>
<img  src="/_astro/import-on-interaction13.DwzeQG6c_Z19Qx4H.webp" alt="" width="1280" height="833" loading="lazy" decoding="async">
<p>상호작용 기반 불러오기 패턴에는 아래의 여러 중요한 측면들이 있다.</p>
<ul>
<li>최초에는 최소한의 코드만을 다운로드하게 하여 페이지를 빨리 볼 수 있게 한다.</li>
<li>그 다음, 사용자의 인터렉션에 적합한 추가 코드를 다운로드하도록 한다. 예를 들어 “검색조건 더 보기” 같은 것이 있다.</li>
<li>이로 인해 사용자가 필요로 하지 않는 여러 기능들은 위한 코드들이 페이지 렌더를 지연시키지 않도록 하는것이다.</li>
</ul>
<img  src="/_astro/import-on-interaction14.B7hB9e85_1wzjMX.webp" alt="" width="1754" height="978" loading="lazy" decoding="async">
<p><strong>너무 빨리 클릭하여 지연로딩 시작이 안되는 문제는 어떻게 해결할 수 있을까?</strong></p>
<p>구글 팀의 프레임웍 스택에는 <a href="https://github.com/google/jsaction">프레임웍 코드가 실행되기도 전에 사용자가 너무 빨리 클릭을 하더라도 이를 추적할 수 있게 해 주는 매우 경량의 이벤트 라이브러리</a>를 사용하고 있다. 이는 아래 두 가지를 위해 활용하고 있다.</p>
<ul>
<li>사용자 인터렉션에 의한 컴포넌트의 다운로드를 트리거한다</li>
<li>사용자 인터렉션을 잘 가지고 있다가 프레임웍이 실행되었을 때 릴레이 해 준다</li>
</ul>
<p>컴포넌트 코드를 로드해야 할 지 판단할 수 있는 다른 항목으로는:</p>
<ul>
<li>유휴 시간 이후의 기간</li>
<li>사용자가 관련된 UI, Button 등에 마우스오버할 때</li>
<li>브라우저의 상태 기반 (네트워크 속도, 데이터 세이버 모드 등)</li>
</ul>
<img  src="/_astro/import-on-interaction15.BF5IMC58_2auSnE.webp" alt="" width="1744" height="992" loading="lazy" decoding="async">
<p><strong>데이터에도 적용이 가능할까?</strong></p>
<p>초기에 받는 데이터는 SSR HTML이나 스트리밍을 통해서 페이지에 렌더링 될 것이다. 그 이후 사용자 인터렉션에 의해 어떤 컴포넌트와 함께 다운로드될 수 있다.</p>
<p>CSS와 JS함수들이 그랬던 것 처럼 데이터도 동적으로 불러올 수 있다. 동적 로딩되는 컴포넌트는 자체적으로 어떤 데이터를 불러와야 하는지 알고 있다. 이 과정은 그냥 요청을 보내는 것이나 다름없다.</p>
<img  src="/_astro/import-on-interaction16.DPaa1n9b_2eXis5.webp" alt="" width="1674" height="940" loading="lazy" decoding="async">
<p>이런 컴포넌트 내의 데이터 요청 코드는 빌드 타임에 이미 결정되어 있을 것이다. 웹 앱은 이를 처리할 때 컴포넌트와 필요 데이터를 동시에 받도록 할 수 있다. 이는 라우팅 경로에 따라 코드를 나누는 것 보다 컴포넌트 기준으로 코드를 나누는 것과 같다.</p>
<p>위 예제에 대하여 조금 더 자세히 알고 싶다면 <a href="https://www.youtube.com/watch?v=-xZHWK-vHbQ">Elevating the Web Platform with the JavaScript Community</a>를 참고하기 바란다.</p>
<h2 id="트레이드오프">트레이드오프</h2>
<p>비용이 높은 코드들을 사용자의 인터렉션 발생 시 다운로드하도록 리펙토링하면 페이지의 초기 로딩 속도를 최적화할 수 있지만, 단점이 없는 것은 아니다.</p>
<p><strong>사용자가 클릭한 뒤 스크립트를 다운로드 받는 시간이 오래 걸리면?</strong></p>
<p>위의 구글 호텔 예제에서 코드를 잘게 나누는 것은 코드와 데이터를 다운로드 받고 실행하는 시간을 줄여줄 수 있다. 하지만 의존하는 모듈이 많고 네트워크 속도가 느린 환경을 고려해보아야 한다.</p>
<p>이런 상황을 피하기 위해서는 중요한 리소스들을 받은 직후 이런 리소스를 prefetch하는것을 고려할 수 있다. 이를 측정하여 앱이 실제로 어느정도의 성능을 보이는지 확인해보는것이 좋다.</p>
<p><strong>사용자 인터렉션이 없어도 동작해야 하는 경우라면?</strong></p>
<p>또 다른 트레이드오프는 사용자 인터렉션 없이는 기능을 제공할 수 없다는 점이다. 비디오 플레이어 임베드 예제에서 이 경우 자동 재생 기능을 이용할 수 없다. 어떤 기능이 중요하다면 이 기능을 다운로드 하기 위해 서드파티 모듈을 스크롤에 따라 지연로딩 하는 등 다른 방법을 사용해야 한다.</p>
<h2 id="상호작용-임베드를-정적인-형태로-교체하는-사례">상호작용 임베드를 정적인 형태로 교체하는 사례</h2>
<p>이 글에서 상호작용 시 불러오기 패턴과 점진적 로딩에 대해 다루었다. 하지만 임베드 되는 컨텐츠를 아예 정적으로 만드는 것에 대해서도 이야기 해볼 필요가 있다.</p>
<p>소셜 미디어 포스트와 같이 페이지 초기 렌더링 시 뷰포트에 즉시 임베드되어 보여야 하는 경우가 있다. 거기에 임베드 되는 영역이 2-3MB씩이나 되는 코드를 가져오는 경우에는 꽤 문제가 될 수 있다. 임베드 되는 컨텐츠는 거의 즉시 렌더링 되어야 하다 보니. 지연로딩과 파사드 UI를 적용하기도 애매한 부분이 있다.</p>
<p>이 때 성능 최적화를 위해 임베드 되는 컨텐츠를 생긴게 똑같은 정적 컨텐츠로 변경하고. 인터렉티브가 가능한 원본 링크를 거는 방법을 선택할 수 있다. 빌드 타임에는 데이터가 템플릿을 통해 정적인 HTML로 만들어진다.</p>
<img  src="/_astro/import-on-interaction17.CYycP8ms_Z2csGd3.webp" alt="" width="1280" height="735" loading="lazy" decoding="async">
<p><a href="https://twitter.com/wongmjane/status/1330676158724116481">이 방법</a>은 <a href="https://twitter.com/@wongmjane">@wongmjane</a>이 <a href="https://twitter.com/wongmjane/status/1330273157245243394">소셜 미디어 임베드를 사용하기 위해 블로그에 적용한 방식</a>이다. 이 방법을 적용하여 임베드 코드가 페이지 내에 적용될 때 겪는 페이지 로딩 성능 문제와 <a href="https://web.dev/cls/">누적 레이아웃 이동</a> 문제를 해결했다.</p>
<p>이 방법은 성능에 유리한 부분이 있지만 추가 작업을 해야 하니 적용할 때 이 부분을 고려해야 한다.</p>
<h2 id="결론">결론</h2>
<p>퍼스트 파티 코드들 (직접 작성한 코드들)은 모던 웹에서 상호작용 가능하기까지의 준비 시간에 영향을 준다. 메인 스레드를 지속적으로 많이 사용하는 퍼스트 파티 코드나 서드파티 리소스들이 이를 더욱 더 지연시킬 수 있다.</p>
<p>일반적으로 document의 head에 동기적으로 서드파티 스크립트를 포함시키지 않도록 하여 퍼스트 파티 코드가 로드되는 것을 서드파티가 블록하지 않도록 한다. 이 글에서 다룬 상호작용 시 불러오기 패턴은 이런 중요하지 않은 코드들을 지연로딩하여 사용자가 UI를 다룰 때 조금 더 쾌적하도록 해 줄 수 있다.</p>
<p>Shubhie Panicker, Connor Clark, Patrick Hulce, Anton Karlovskiy 및 Adam Raine의 의견에 특별히 감사드립니다.</p> </div> </div>  </div> </div> </div>  </main> </body></html> 