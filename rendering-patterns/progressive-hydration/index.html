<!DOCTYPE html><html lang="ko" data-astro-cid-sckkx6r4> <head><meta charset="utf-8"><meta content="ie=edge" http-equiv="x-ua-compatible"><meta content="initial-scale=1, maximum-scale=5, width=device-width, viewport-fit=cover" name="viewport"><meta content="er9zvCmECxtt0KP_BjDZ4WplZsNT5ApeDBK4wYD7aI0" name="google-site-verification"><meta content="eaca9475c8a73d77aa2e34ac3d3e8097cef7397d" name="naver-site-verification"><meta content="Astro v4.16.6" name="generator"><title>Patterns.dev.kr</title><link rel="canonical" href="https://patterns-dev-kr.github.io/rendering-patterns/progressive-hydration/"><meta name="description" content="모던 웹 앱 디자인 패턴"><meta name="robots" content="index, follow"><meta property="og:title" content="Progressive Hydration"><meta property="og:type" content="article"><meta property="og:image" content="./progressive-hydration.jpg"><meta property="og:url" content="https://patterns-dev-kr.github.io/rendering-patterns/progressive-hydration/"><meta property="og:image:url" content="./progressive-hydration.jpg"><meta property="og:image:alt" content="Progressive Hydration"><link crossorigin href="https://fonts.gstatic.com" rel="preconnect"><link href="/favicon.png" rel="icon" sizes="any" type="image/png"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="swap"><script src="https://www.googletagmanager.com/gtag/js?id=G-3XKKTEVFKQ" type="text/partytown"></script><script type="text/partytown">
      window.dataLayer = window.dataLayer || []
      function gtag() {
        // eslint-disable-next-line prefer-rest-params
        window.dataLayer.push(arguments)
      }
      gtag('js', new Date())
      gtag('config', 'G-3XKKTEVFKQ')
    </script><script>
      document.addEventListener('astro:page-load', () => {
        if (navigator.userAgent.indexOf('Win') > -1) {
          document.documentElement.classList.add('win')
        }
      })
    </script><link rel="stylesheet" href="/_astro/_slug_.CnWBadwT.css">
<link rel="stylesheet" href="/_astro/_slug_.OicVUOHF.css"><script type="module" src="/_astro/hoisted.4sIGGDry.js"></script>
<script>!(function(w,p,f,c){if(!window.crossOriginIsolated && !navigator.serviceWorker) return;c=w[p]=Object.assign(w[p]||{},{"lib":"/~partytown/","debug":false});c[f]=(c[f]||[]).concat(["dataLayer.push"])})(window,'partytown','forward');/* Partytown 0.10.2 - MIT builder.io */
const t={preserveBehavior:!1},e=e=>{if("string"==typeof e)return[e,t];const[n,r=t]=e;return[n,{...t,...r}]},n=Object.freeze((t=>{const e=new Set;let n=[];do{Object.getOwnPropertyNames(n).forEach((t=>{"function"==typeof n[t]&&e.add(t)}))}while((n=Object.getPrototypeOf(n))!==Object.prototype);return Array.from(e)})());!function(t,r,o,i,a,s,c,d,l,p,u=t,f){function h(){f||(f=1,"/"==(c=(s.lib||"/~partytown/")+(s.debug?"debug/":""))[0]&&(l=r.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(d=setTimeout(v,1e4),r.addEventListener("pt0",w),a?y(1):o.serviceWorker?o.serviceWorker.register(c+(s.swPath||"partytown-sw.js"),{scope:c}).then((function(t){t.active?y():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&y()}))}),console.error):v())))}function y(e){p=r.createElement(e?"script":"iframe"),t._pttab=Date.now(),e||(p.style.display="block",p.style.width="0",p.style.height="0",p.style.border="0",p.style.visibility="hidden",p.setAttribute("aria-hidden",!0)),p.src=c+"partytown-"+(e?"atomics.js?v=0.10.2":"sandbox-sw.html?"+t._pttab),r.querySelector(s.sandboxParent||"body").appendChild(p)}function v(n,o){for(w(),i==t&&(s.forward||[]).map((function(n){const[r]=e(n);delete t[r.split(".")[0]]})),n=0;n<l.length;n++)(o=r.createElement("script")).innerHTML=l[n].innerHTML,o.nonce=s.nonce,r.head.appendChild(o);p&&p.parentNode.removeChild(p)}function w(){clearTimeout(d)}s=t.partytown||{},i==t&&(s.forward||[]).map((function(r){const[o,{preserveBehavior:i}]=e(r);u=t,o.split(".").map((function(e,r,o){var a;u=u[o[r]]=r+1<o.length?u[o[r]]||(a=o[r+1],n.includes(a)?[]:{}):(()=>{let e=null;if(i){const{methodOrProperty:n,thisObject:r}=((t,e)=>{let n=t;for(let t=0;t<e.length-1;t+=1)n=n[e[t]];return{thisObject:n,methodOrProperty:e.length>0?n[e[e.length-1]]:void 0}})(t,o);"function"==typeof n&&(e=(...t)=>n.apply(r,...t))}return function(){let n;return e&&(n=e(arguments)),(t._ptf=t._ptf||[]).push(o,arguments),n}})()}))})),"complete"==r.readyState?h():(t.addEventListener("DOMContentLoaded",h),t.addEventListener("load",h))}(window,document,navigator,top,window.crossOriginIsolated);;(e=>{e.addEventListener("astro:before-swap",e=>{let r=document.body.querySelector("iframe[src*='/~partytown/']");if(r)e.newDocument.body.append(r)})})(document);</script><style>[data-astro-transition-scope="astro-mw4a64ze-1"] { view-transition-name: sidebar; }@layer astro { ::view-transition-old(sidebar) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(sidebar) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(sidebar) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(sidebar) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-mw4a64ze-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-mw4a64ze-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-mw4a64ze-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-mw4a64ze-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-mw4a64ze-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-mw4a64ze-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-mw4a64ze-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-mw4a64ze-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style></head> <body data-astro-cid-sckkx6r4> <header data-header class="fixed left-0 right-0 top-0 z-10 h-20 px-3 transition-all ease-out [&.scroll]:h-12 [&.scroll]:bg-th-bg [&.scroll]:shadow-md" data-astro-cid-3ef6ksr2> <div class="container flex h-full items-center justify-between font-lexend text-th-text" data-astro-cid-3ef6ksr2> <div class="flex items-center gap-4" data-astro-cid-3ef6ksr2> <button class="flex h-6 w-6 flex-grow-0 items-center justify-center lg:hidden" data-menu-button type="button" data-astro-cid-3ef6ksr2> <svg width="1em" height="1em" viewBox="0 0 32 32" class="text-2xl" data-astro-cid-3ef6ksr2 data-icon="carbon:menu">  <symbol id="ai:carbon:menu"><path fill="currentColor" d="M4 6h24v2H4zm0 18h24v2H4zm0-12h24v2H4zm0 6h24v2H4z"/></symbol><use xlink:href="#ai:carbon:menu"></use>  </svg> </button> <a aria-label="Go to Home" class="text-2xl font-bold leading-none text-th-text no-underline" href="/" data-astro-cid-3ef6ksr2>patterns</a> </div> <nav class="flex items-center text-sm" data-astro-cid-3ef6ksr2> <a class="relative flex items-center px-3 font-light text-th-text no-underline data-[active]:font-medium" data-active href="/" data-astro-cid-3ef6ksr2>Read</a> <a class="relative flex items-center px-3 font-light text-th-text no-underline data-[active]:font-medium" href="/about" data-astro-cid-3ef6ksr2>About</a> <custom-theme-switcher data-astro-cid-dz5h74bc> <button class="relative flex h-8 w-8 place-content-center place-items-center rounded-sm" title="Change color theme" type="button" data-astro-cid-dz5h74bc> <svg width="1em" height="1em" viewBox="0 0 24 24" data-light data-astro-cid-dz5h74bc data-icon="octicon:sun-24">  <symbol id="ai:octicon:sun-24"><path fill="currentColor" d="M12 19a7 7 0 1 1 0-14a7 7 0 0 1 0 14m0-1.5a5.5 5.5 0 1 0 0-11a5.5 5.5 0 1 0 0 11m-5.657.157a.75.75 0 0 1 0 1.06l-1.768 1.768a.749.749 0 0 1-1.275-.326a.75.75 0 0 1 .215-.734l1.767-1.768a.75.75 0 0 1 1.061 0M3.515 3.515a.75.75 0 0 1 1.06 0l1.768 1.768a.749.749 0 0 1-.326 1.275a.75.75 0 0 1-.734-.215L3.515 4.575a.75.75 0 0 1 0-1.06M12 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 12 0M4 12a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 12m8 8a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 12 20m12-8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 24 12m-6.343 5.657a.75.75 0 0 1 1.06 0l1.768 1.768a.75.75 0 0 1-.018 1.042a.75.75 0 0 1-1.042.018l-1.768-1.767a.75.75 0 0 1 0-1.061m2.828-14.142a.75.75 0 0 1 0 1.06l-1.768 1.768a.75.75 0 0 1-1.042-.018a.75.75 0 0 1-.018-1.042l1.767-1.768a.75.75 0 0 1 1.061 0"/></symbol><use xlink:href="#ai:octicon:sun-24"></use>  </svg> <svg width="1em" height="1em" viewBox="0 0 24 24" data-dark data-astro-cid-dz5h74bc data-icon="octicon:moon-24">  <symbol id="ai:octicon:moon-24"><path fill="currentColor" d="m14.768 3.96l-.002-.005a9 9 0 0 0-.218-.779c-.13-.394.21-.8.602-.67q.435.144.855.328l.01.005A10.002 10.002 0 0 1 12 22a10 10 0 0 1-9.162-5.985l-.004-.01a10 10 0 0 1-.329-.855c-.13-.392.277-.732.67-.602q.386.126.78.218l.004.002A9 9 0 0 0 14.999 6a9 9 0 0 0-.231-2.04M16.5 6c0 5.799-4.701 10.5-10.5 10.5q-.64 0-1.26-.075A8.5 8.5 0 1 0 16.425 4.74q.075.62.075 1.259Z"/></symbol><use xlink:href="#ai:octicon:moon-24"></use>  </svg> <svg width="1em" height="1em" viewBox="0 0 24 24" data-auto data-astro-cid-dz5h74bc data-icon="octicon:devices-24">  <symbol id="ai:octicon:devices-24"><path fill="currentColor" d="M1 3.75C1 2.784 1.784 2 2.75 2h18.5c.966 0 1.75.784 1.75 1.75v4a.75.75 0 0 1-1.5 0v-4a.25.25 0 0 0-.25-.25H2.75a.25.25 0 0 0-.25.25v11.5c0 .138.112.25.25.25h9a.75.75 0 0 1 0 1.5h-1.287c-.126 1.266-.564 2.445-1.223 3.5h2.51a.75.75 0 0 1 0 1.5h-4a.75.75 0 0 1-.565-1.243c.964-1.105 1.598-2.382 1.769-3.757H2.75A1.75 1.75 0 0 1 1 15.25z"/><path fill="currentColor" d="M14 11.75c0-.967.783-1.75 1.75-1.75h5.5c.966 0 1.75.783 1.75 1.75v8.5A1.75 1.75 0 0 1 21.25 22h-5.5A1.75 1.75 0 0 1 14 20.25Zm1.75-.25a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h5.5a.25.25 0 0 0 .25-.25v-8.5a.25.25 0 0 0-.25-.25Z"/></symbol><use xlink:href="#ai:octicon:devices-24"></use>  </svg> </button> </custom-theme-switcher> <script>
  // for avoid FOUC
  const loadTheme = () => {
    if (typeof localStorage === 'undefined') {
      return { preferred: 'light', theme: 'auto' }
    }

    const value = localStorage.getItem('theme')

    return {
      preferred: matchMedia('(prefers-color-scheme: light)').matches
        ? 'light'
        : 'dark',
      theme: value === 'dark' || value === 'light' ? value : 'auto',
    }
  }

  const { preferred, theme } = loadTheme()
  const {
    documentElement: { classList },
  } = document

  if (theme === 'auto') {
    classList.add('auto')
  } else {
    classList.remove('auto')
  }

  const actual = theme === 'auto' ? preferred : theme

  if (actual === 'dark') {
    classList.add('dark')
  } else {
    classList.remove('dark')
  }
</script>   </nav> </div> </header>   <main class="relative" data-astro-cid-sckkx6r4>  <div class="px-3 transition-colors"> <div class="container relative mx-auto flex justify-center pt-20 text-th-text"> <custom-sidebar data-astro-cid-ssfzsv2f> <aside aria-label="Sidebar" data-astro-cid-ssfzsv2f> <button data-menu-close type="button" data-astro-cid-ssfzsv2f> <svg width="1em" height="1em" viewBox="0 0 32 32" class="h-6 w-6" data-astro-cid-ssfzsv2f data-icon="carbon:close">  <symbol id="ai:carbon:close"><path fill="currentColor" d="M17.414 16L24 9.414L22.586 8L16 14.586L9.414 8L8 9.414L14.586 16L8 22.586L9.414 24L16 17.414L22.586 24L24 22.586z"/></symbol><use xlink:href="#ai:carbon:close"></use>  </svg> </button> <h2 class="title" data-astro-cid-ssfzsv2f>Design Patterns</h2> <ul class="list" data-astro-cid-ssfzsv2f> <li data-astro-cid-ssfzsv2f> <a href="/design-patterns/introduction" data-astro-cid-ssfzsv2f> Design Pattern 소개 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/singleton-pattern" data-astro-cid-ssfzsv2f> Singleton 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/proxy-pattern" data-astro-cid-ssfzsv2f> Proxy 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/provider-pattern" data-astro-cid-ssfzsv2f> Provider 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/prototype-pattern" data-astro-cid-ssfzsv2f> Prototype 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/container-presentational-pattern" data-astro-cid-ssfzsv2f> Container/Presentational 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/observer-pattern" data-astro-cid-ssfzsv2f> Observer 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/module-pattern" data-astro-cid-ssfzsv2f> Module 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/mixin-pattern" data-astro-cid-ssfzsv2f> Mixin 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/mediator-middleware-pattern" data-astro-cid-ssfzsv2f> Mediator/Middleware 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/hoc-pattern" data-astro-cid-ssfzsv2f> HOC 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/render-props-pattern" data-astro-cid-ssfzsv2f> Render Props 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/hooks-pattern" data-astro-cid-ssfzsv2f> Hooks 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/flyweight-pattern" data-astro-cid-ssfzsv2f> Flyweight 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/factory-pattern" data-astro-cid-ssfzsv2f> Factory 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/compound-pattern" data-astro-cid-ssfzsv2f> Compound 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/command-pattern" data-astro-cid-ssfzsv2f> Command 패턴 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/design-patterns/learnaing-javascript-design-patterns" data-astro-cid-ssfzsv2f> Learning JavaScript Design Patterns </a> </li> </ul> <h2 class="title" data-astro-cid-ssfzsv2f>Rendering Patterns</h2> <ul class="list" data-astro-cid-ssfzsv2f> <li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/introduction" data-astro-cid-ssfzsv2f> 소개 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/overview-of-reactjs" data-astro-cid-ssfzsv2f> Reactjs의 개요 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/overview-of-nextjs" data-astro-cid-ssfzsv2f> Nextjs의 개요 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/client-side-rendering" data-astro-cid-ssfzsv2f> 클라이언트 사이드 렌더링 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/server-side-rendering" data-astro-cid-ssfzsv2f> 서버 사이드 렌더링 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/static-rendering" data-astro-cid-ssfzsv2f> 정적 렌더링 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/incremental-static-generation" data-astro-cid-ssfzsv2f> Incremental Static Generation </a> </li><li class="active" data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/progressive-hydration" data-astro-cid-ssfzsv2f> Progressive Hydration </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/streaming-server-side-rendering" data-astro-cid-ssfzsv2f> Streaming Server Side Rendering </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/react-server-components" data-astro-cid-ssfzsv2f> React Server Components </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/selective-hydration" data-astro-cid-ssfzsv2f> Selective Hydration </a> </li><li data-astro-cid-ssfzsv2f> <a href="/rendering-patterns/the-island-architecture" data-astro-cid-ssfzsv2f> The Island Architecture </a> </li> </ul> <h2 class="title" data-astro-cid-ssfzsv2f>Performance Patterns</h2> <ul class="list" data-astro-cid-ssfzsv2f> <li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/loading-sequence" data-astro-cid-ssfzsv2f> 리소스 로딩 순서 최적화 </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/static-import" data-astro-cid-ssfzsv2f> Static Import </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/dynamic-import" data-astro-cid-ssfzsv2f> Dynamic Import </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/import-on-visibility" data-astro-cid-ssfzsv2f> Import On Visibility </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/import-on-interaction" data-astro-cid-ssfzsv2f> Import On Interaction </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/route-based-splitting" data-astro-cid-ssfzsv2f> Route Based Splitting </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/bundle-splitting" data-astro-cid-ssfzsv2f> Bundle Splitting </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/prpl-pattern" data-astro-cid-ssfzsv2f> PRPL Pattern </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/tree-shaking" data-astro-cid-ssfzsv2f> Tree Shaking </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/preload" data-astro-cid-ssfzsv2f> Preload </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/prefetch" data-astro-cid-ssfzsv2f> Prefetch </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/third-parties" data-astro-cid-ssfzsv2f> Third Parties </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/list-virtualization" data-astro-cid-ssfzsv2f> List Virtualization </a> </li><li data-astro-cid-ssfzsv2f> <a href="/performance-patterns/compressing-javascript" data-astro-cid-ssfzsv2f> Compressing JavaScript </a> </li> </ul> <h2 class="title" data-astro-cid-ssfzsv2f>Case Studies</h2> <ul class="list" data-astro-cid-ssfzsv2f> <li data-astro-cid-ssfzsv2f> <a href="/case-studies/airbnb-case-study" data-astro-cid-ssfzsv2f> Airbnb Case Study </a> </li><li data-astro-cid-ssfzsv2f> <a href="/case-studies/hey-com" data-astro-cid-ssfzsv2f> Hey.com </a> </li><li data-astro-cid-ssfzsv2f> <a href="/case-studies/optimizing-core-web-vitals-on-a-nextjs-app" data-astro-cid-ssfzsv2f> Optimizing Core Web Vitals on a Next.js app </a> </li> </ul> </aside> <div class="dimmed" data-astro-cid-ssfzsv2f></div> </custom-sidebar>   <div class="max-w-full flex-auto">  <div class="px-2 py-2 lg:ml-72" data-astro-cid-fzx4jmue> <h1 class="mb-4 break-all text-4xl tracking-tight" data-astro-cid-fzx4jmue>Progressive Hydration</h1> <div class="mb-2" data-astro-cid-fzx4jmue> <a class="text-sm" href="https://docs.google.com/forms/d/e/1FAIpQLScQPXWUlnKvkAhf7JJMENcPywlPKMmIFCYonxEByqKNJ3lu2g/viewform?usp=pp_url&entry.2111705104=rendering-patterns/progressive-hydration" rel="noreferrer" target="_blank" data-astro-cid-fzx4jmue>
📮 피드백 보내기
</a> </div> <div class="_content prose prose-stone mb-20 max-w-full dark:prose-invert prose-headings:font-semibold prose-h1:mt-20 prose-a:relative prose-a:no-underline prose-a:after:absolute prose-a:after:bottom-0 prose-a:after:left-0 prose-a:after:right-0 prose-a:after:h-[1px] prose-a:after:bg-th-text/80 prose-a:after:content-['']" data-astro-cid-fzx4jmue> <aside>📜 원문: <a href="https://www.patterns.dev/posts/progressive-hydration/" target="_blank">patterns.dev - progressive hydration</a></aside>
<h2 id="소개">소개</h2>
<p>서버에서 현재 탐색한 페이지에 대한 HTML이 만들어진다. 서버가 정적 UI표현에 꼭 필요한 CSS나 JSON데이터 를 포함한 HTML컨텐츠를 만들고 나면. 즉시 클라이언트에 전송된다. 서버에서 마크업을 이미 만들었기 때문에 클라이언트는 내용을 파싱하고 화면에 빠르게 출력한다. 즉시 꽤 빠른 FCP(First Contentful Paint) 시간이 측정되었다.</p>
<p>하지만 FCP가 빠르다고 하여 TTI가 항상 빠른것은 아니다. 웹 사이트의 요소들과 인터렉션을 위한 자바스크립트가 아직 로드되지 않았다. 버튼들은 인터렉션이 가능해 보이긴 하지만 아직 동작하지 않는다. 클릭 이벤트 핸들러는 자바스크립트 번들이 로드되고 처리된 이후에 바인딩된다. 이 과정을 hydration이라 한다. React는 현재의 DOM노드들을 확인하고 각 노드들을 대응하는 자바스크립트에 hydration한다.</p>
<p>사용자가 화면에 보이는 UI들과 인터렉션할 수 없을때까지의 시간을 “불쾌한 골짜기”(컴포넌트는 완전히 보여지는데 핸들러가 아직 바인딩되지 않아 인터렉션을 할 수 없는 순간) 이라 한다. 사용자는 웹사이트와 인터렉션이 가능할 것이라고 생각하지만. 컴포넌트 핸들러는 아직 바인딩되지 않았다. 이는 사용자로 하여금 UI가 굳은 것 처럼 느껴지게 할 수 있다.</p>
<p>서버로부터 받은 DOM 컴포넌트들이 완전히 hydration될 때까지는 시간이 걸린다. 컴포넌트가 hydrate가능해지기 전 까지. 자바스크립트 파일들은 로드되고 처리되며 실행된다. 이 때 모든 앱이 한번에 hydrate되도록 하는 대신, 이전에 했던것과 비슷하게 이 과정도 DOM노드마다 점진적으로 진행할 수 있다. 점진적 hydration은 위에서 언급했던 시간 동안에 개별 node별로 hydrate를 할 수 있도록 하여 최소 필요한 자바스크립트만 요청하여 처리할 수 있도록 해 준다.</p>
<p><video width="100%" src="/rendering-progressive-hydration01.mp4" autoplay controls playsinline loop></video></p>
<p>앱을 점진적으로 hydration하여 페이지 내에서 덜 중요한 부분의 hydration을 지연시킬 수 있다. 이런 방식으로 페이지를 인터렉션 가능하게 만들기 위해 받아야 하는 자바스크립트의 크기를 줄일 수 있고 또 사용자에게 필요로 하는 노드만 hydrate할 수 있다. 점진적 hydration은 SSR의 rehydration과정에서 서버가 렌더링 한 DOM트리가 제거되고 다시 만들어질 때 발생할 수 있는 문제를 겪지 않게 해 줄 수 있다.</p>
<p><video width="100%" src="/rendering-progressive-hydration02.mp4" autoplay controls playsinline loop></video></p>
<p>점진적 hydration은 특정 조건에 만족하는 컴포넌트에 대해서만 hydrate할 수 있도록 해 준다. 예를들어 뷰포트에 보여지는 컴포넌트들이 있다. 아래 예제에서는 사용자의 목록을 렌더링하고 있는데 뷰포트에 들어온 컴포넌트에 대해서만 hydrate하고 있다. 컴포넌트가 보라색으로 반짝이면 hydrate 되었다는 것이다.</p>
<iframe src="https://codesandbox.io/embed/progressivehydration-dgf8z?fontsize=14&#x26;hidenavigation=1&#x26;module=%2Fsrc%2Fclient.js&#x26;theme=dark" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="progressivehydration" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe>
<p>이 과정이 빠르게 일어나는것과 별개로 UI는 UI대로 초기 진입때부터 렌더링 되는것을 확인할 수 있다. 초기에 받는 HTML이 동일한 정보들과 스타일을 포함하고 있기 때문에 어떠한 깜빡임과 움직임 없이 컴포넌트를 끊김없이 인터렉티브하게 만들 수 있다. 점진적 hydration은 조건부로 특정 컴포넌트를 인터렉트 가능하도록 만들 수 있고 이 과정이 진행중인것을 사용자는 알아차리기 어려울 것이다.</p>
<h2 id="점진적-hydration-구현하기">점진적 hydration 구현하기</h2>
<p>React를 사용하여 SSR을 구현하는 섹션에서 서버에서 렌더링 된 앱에 대한 클라이언트 측 hydration에 대해서 이야기 했었다. Hydration은 클라이언트 측 React가 서버에서 렌더링 된 ReactDOM 컴포넌트를 인지하고 이벤트 핸들러를 바인딩할 수 있게 해 준다. 따라서 SSR앱에 클라이언트에서 활성화된 CSR앱과 같이 연속성과 끊김없이 부드러운 사용성을 제공한다.</p>
<p>페이지 내의 모든 컴포넌트들이 hydration을 통해 인터렉트가 가능하도록 하기 위해 이런 동작을 하는 React의 코드들이 번들에 포함되에 클라이언트에 다운로드 된다. 앱의 모든 부분이 자바스크립트에 의해 제어되어야 하여 인터렉트가 매우 중요한 SPA는 전체 번들이 한번에 필요하겠지만, 대부분의 인터렉트 가능한 요소가 적은 정적 웹 사이트들은 모든 컴포넌트가 즉시 인터렉트 가능해질 필요가 없다. 이러한 사이트들에 각 컴포넌트를 위해 크기가 큰 React번들을 전송하는것은 오버헤드가 될 수 있다.</p>
<p>점진적 hydration은 페이지가 로드 될 때 앱의 일정 부분에 대해서만 hydrate를 가능하게 하여 이런 문제를 해결한다. 다른 부분들은 필요에 따라 점진적으로 hydration된다.</p>
<img  src="/_astro/Rendering-ProgressiveHydration01.B4im1_z8_zA94H.webp" alt="" width="2043" height="1143" loading="lazy" decoding="async">
<p>위 그림에서 “You may also like” 와 “Other content”는 나중에 필요에 따라 hydrate될 수 있다.</p>
<p>전체 앱이 한번에 초기화되는 대신, hydration과정은 DOM트리의 루트부터 시작되지만 서버 렌더링 앱의 개별적인 부분들은 일정 기간동안 활성되된다. Hydration 과정은 다양한 지점에서 정지될 수 있고 각 부분들이 뷰포트에 들어오는 등의 조건을 만족할 때 재시작 될 수 있다. 주목할 점은 각 hydration을 위한 리소스의 로드 역시 코드 스플리팅에 의해 지연될 수 있다는 점이다. 따라서 페이지를 인터렉트 가능하게 만드는 데 필요한 자바크스립트의 양도 줄어든다.</p>
<p>점진적 hydration의 기본 개념은 개발한 앱의 코드를 분할하고 개별적으로 활성화하여 좋은 성능을 이끌어내는 것이다. 모든 점진적 hydration 솔루션은 그것을 적용했을 때 사용자 경험에 어떤 영향을 줄 수 있는지를 고려해야 한다. 화면의 각 부분에 대한 코드들이 화면에 보여지는 순서를 조절할 순 없지만, 이미 로드된 코드 부분이 활성화 되는 것이나, 사용자의 입력을 막게 될 수는 있다. 따라서 전체적인 점진적 hydration에 대한 요구사항은 아래와 같다.</p>
<ol>
<li>모든 컴포넌트에 대해 SSR을 사용한다.</li>
<li>코드 스플리팅을 지원해 개별 컴포넌트 혹은 부분별로 코드를 나눌 수 있어야 한다.</li>
<li>분할된 코드들에 대한 hydration순서를 개발자가 정의할 수 있어야 한다.</li>
<li>이미 hydrate된 코드들에 대하여 사용자의 입력을 막으면 안된다.</li>
<li>Hydration이 지연된 분할코드에 대하여 로딩 스피너등을 사용할 수 있어야 한다.</li>
</ol>
<p><a href="https://reactjs.org/docs/concurrent-mode-patterns.html">React의 동시성 모드</a>를 사용하면 위 요구사항을 모두 충족시킬 수 있다. 동시성 모드는 React가 여러 작업을 동시에 진행할수 있게 해 주고 주어진 우선순위에 따라 해당 작업들을 전환할 수 있게 해 준다. 교체할 때 부분적으로 렌더링 된 트리는 커밋(VDOM을 실제 DOM에 반영하는 동작)할 필요가 없기 때문에 React가 동일한 작업으로 다시 전환되었을 때 렌더링 작업을 이어 진행할 수 있다.</p>
<aside>💡 동시성 모드 설명에 보면 다른 페이지로 전환할 때 다음 화면이 로딩되지 않은 상태에서. 스피너와 함께 빈 페이지를 보는것 대신 이전 컨텐츠를 계속 보여주는 예시를 소개하고 있다. 위 설명은 해당 내용과 함께 읽으면 이해하는데 도움이 된다.</aside>
<p>동시성 모드는 점진적 hydration을 구현하는데 사용할 수 있다. 이 경우 페이지의 분할된 코드들을 hydration하는 것은 React동시성 모드에서 나눠진 각 작업에 대응한다. 사용자의 입력에 반응해야 하는 우선순위가 높은 작업이 들어올 경우 React는 hydration 작업을 일시적으로 멈추고 사용자 입력을 받아들이는 작업으로 전한다. <a href="https://reactjs.org/docs/code-splitting.html#reactlazy">lazy()</a>와 <a href="https://reactjs.org/docs/code-splitting.html#reactlazy">Suspense()</a>는 로딩 상태를 변수로 제공한다. 해당 변수를 사용해 분리된 코드들이 로드중일 때 스피너를 화면에 보여줄 수 있다. <code>SuspenseList()</code>는 컴포넌트들의 지연로딩 순서를 정의할 때 사용할 수 있다. <a href="https://twitter.com/dan_abramov/status/1200111677833973760">Dan Abramov</a>가 공유한 <a href="https://codesandbox.io/s/floral-worker-xwbwv">데모</a>에서는 동시성 모드의 동작과 점진적 hydration을 구현하고 있다.</p>
<p>React의 동시성 모드는 React의 다른 기능과도 함께 사용할 수 있다.</p>
<ul>
<li><a href="https://github.com/reactjs/rfcs/blob/bf51f8755ddb38d92e23ad415fc4e3c02b95b331/text/0000-server-components.md">서버 컴포넌트</a>는 전체 다운로드가 끝나는 것을 기다리지 않고, 상태 변경에 따라 리-렌더링 된 컴포넌트를 서버로부터 다시 받을 수 있으며 이 것을 클라이언트에 스트리밍하는것처럼 렌더링할 수 있다. 따라서 네트워크 요청이 진행중일 때에도 클라이언트의 CPU를 활용할 수 있다.</li>
</ul>
<p>React의 동시성 모드를 기반으로 한 점진적 hydration은 아직 개발 단계에 있지만. 다른 오픈소스들을 통해서 사용할 수 있다. 점진적 hydration은 <a href="https://www.youtube.com/watch?v=k-A2VfuUROg&#x26;t=960s">Google I/O ‘19</a> 에서 Hydrator컴포넌트를 통해 페이지 내에서 각 부분을 부분적으로 hydration처리하는 [점진적 hydration데모](<a href="https://github.com/GoogleChromeLabs/progressive-rendering-frameworks-samples/tree/master/react-progressive-hydration)%EC%99%80">https://github.com/GoogleChromeLabs/progressive-rendering-frameworks-samples/tree/master/react-progressive-hydration)와</a> 함께 공개되었다. 각기 다른 클라이언트 사이드 프레임웍에서 이를 지원하기 시작했다. 이 기능은 Vue, Angular, Next.js에서도 사용할 수 있다.</p>
<p>Preact와 Next.js를 사용하여 이를 구현한 예제를 살펴보자.</p>
<p>이 예제는 아래 라이브러리를 사용하여 부분 hydration을 구현하고 있다.</p>
<ol>
<li><code>pool-attendant-preact</code> : Preact x 를 활용하려 부분 hydration을 구현한 라이브러리</li>
<li><code>next-super-performance</code> : 클라이언트 측 성능을 위해 사용하는 Next.js 플러그인</li>
</ol>
<p><code>pool-attendant-preact</code> 라이브러리가 제공하는 <code>withHydration</code> 을 이용하여 먼저 hydration되길 원하는 특정 컴포넌트들을 따로 처리할 수 있다. 아래 코드처럼 사용할 수 있다.</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto;" tabindex="0" data-language="jsx"><code><span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> Teaser </span><span style="color:#CBA6F7">from</span><span style="color:#A6E3A1"> './teaser'</span></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> withHydration </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> 'next-super-performance'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">const</span><span style="color:#CDD6F4"> HydratedTeaser </span><span style="color:#94E2D5">=</span><span style="color:#89B4FA;font-style:italic"> withHydration</span><span style="color:#CDD6F4">(Teaser)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">export</span><span style="color:#CBA6F7"> default</span><span style="color:#CBA6F7"> function</span><span style="color:#89B4FA;font-style:italic"> Body</span><span style="color:#9399B2">()</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CBA6F7">  return</span><span style="color:#CDD6F4"> (</span></span>
<span class="line"><span style="color:#94E2D5">    &#x3C;</span><span style="color:#89B4FA">main</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#94E2D5">      &#x3C;</span><span style="color:#F5C2E7">Teaser</span><span style="color:#F9E2AF"> column</span><span style="color:#94E2D5">=</span><span style="color:#9399B2">{</span><span style="color:#FAB387">1</span><span style="color:#9399B2">}</span><span style="color:#94E2D5"> /></span></span>
<span class="line"><span style="color:#94E2D5">      &#x3C;</span><span style="color:#F5C2E7">HydratedTeaser</span><span style="color:#F9E2AF"> column</span><span style="color:#94E2D5">=</span><span style="color:#9399B2">{</span><span style="color:#FAB387">2</span><span style="color:#9399B2">}</span><span style="color:#94E2D5"> /></span></span>
<span class="line"><span style="color:#94E2D5">      &#x3C;</span><span style="color:#F5C2E7">HydratedTeaser</span><span style="color:#F9E2AF"> column</span><span style="color:#94E2D5">=</span><span style="color:#9399B2">{</span><span style="color:#FAB387">3</span><span style="color:#9399B2">}</span><span style="color:#94E2D5"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#94E2D5">      &#x3C;</span><span style="color:#F5C2E7">Teaser</span><span style="color:#F9E2AF"> column</span><span style="color:#94E2D5">=</span><span style="color:#9399B2">{</span><span style="color:#FAB387">1</span><span style="color:#9399B2">}</span><span style="color:#94E2D5"> /></span></span>
<span class="line"><span style="color:#94E2D5">      &#x3C;</span><span style="color:#F5C2E7">Teaser</span><span style="color:#F9E2AF"> column</span><span style="color:#94E2D5">=</span><span style="color:#9399B2">{</span><span style="color:#FAB387">2</span><span style="color:#9399B2">}</span><span style="color:#94E2D5"> /></span></span>
<span class="line"><span style="color:#94E2D5">      &#x3C;</span><span style="color:#F5C2E7">Teaser</span><span style="color:#F9E2AF"> column</span><span style="color:#94E2D5">=</span><span style="color:#9399B2">{</span><span style="color:#FAB387">3</span><span style="color:#9399B2">}</span><span style="color:#94E2D5"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#94E2D5">      &#x3C;</span><span style="color:#F5C2E7">Teaser</span><span style="color:#F9E2AF"> column</span><span style="color:#94E2D5">=</span><span style="color:#9399B2">{</span><span style="color:#FAB387">1</span><span style="color:#9399B2">}</span><span style="color:#94E2D5"> /></span></span>
<span class="line"><span style="color:#94E2D5">      &#x3C;</span><span style="color:#F5C2E7">Teaser</span><span style="color:#F9E2AF"> column</span><span style="color:#94E2D5">=</span><span style="color:#9399B2">{</span><span style="color:#FAB387">2</span><span style="color:#9399B2">}</span><span style="color:#94E2D5"> /></span></span>
<span class="line"><span style="color:#94E2D5">      &#x3C;</span><span style="color:#F5C2E7">Teaser</span><span style="color:#F9E2AF"> column</span><span style="color:#94E2D5">=</span><span style="color:#9399B2">{</span><span style="color:#FAB387">3</span><span style="color:#9399B2">}</span><span style="color:#94E2D5"> /></span></span>
<span class="line"><span style="color:#94E2D5">    &#x3C;/</span><span style="color:#89B4FA">main</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#CDD6F4">  )</span></span>
<span class="line"><span style="color:#9399B2">}</span></span>
<span class="line"></span></code></pre>
<p>2, 3번째로 렌더링 되는 <code>HydratedTeaser</code> 가 제일 먼저 hydrate된다. 나머지 컴포넌트들은 클라이언트 측에서 동일한 라이브러리에서 제공되 <code>hydrate()</code>를 통해 hydrate할 수 있다.</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto;" tabindex="0" data-language="jsx"><code><span class="line"><span style="color:#CBA6F7">import</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> hydrate </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> 'next-super-performance'</span></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> Teaser </span><span style="color:#CBA6F7">from</span><span style="color:#A6E3A1"> './components/teaser'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89B4FA;font-style:italic">hydrate</span><span style="color:#CDD6F4">([Teaser])</span></span>
<span class="line"></span></code></pre>
<p>아래 <code>HydrationData</code> 컴포넌트는 클라이언트를 에서 사용할 직렬화 된 props를 작성하기 위해 사용된다. hydrate될 컴포넌트들에게 필요한 데이터를 전달해 준다.</p>
<pre class="astro-code catppuccin-mocha" style="background-color:#1e1e2e;color:#cdd6f4; overflow-x: auto;" tabindex="0" data-language="jsx"><code><span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> Header </span><span style="color:#CBA6F7">from</span><span style="color:#A6E3A1"> '../components/header'</span></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#CDD6F4"> Main </span><span style="color:#CBA6F7">from</span><span style="color:#A6E3A1"> '../components/main'</span></span>
<span class="line"><span style="color:#CBA6F7">import</span><span style="color:#9399B2"> {</span><span style="color:#CDD6F4"> HydrationData </span><span style="color:#9399B2">}</span><span style="color:#CBA6F7"> from</span><span style="color:#A6E3A1"> 'next-super-performance'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CBA6F7">export</span><span style="color:#CBA6F7"> default</span><span style="color:#CBA6F7"> function</span><span style="color:#89B4FA;font-style:italic"> Home</span><span style="color:#9399B2">()</span><span style="color:#9399B2"> {</span></span>
<span class="line"><span style="color:#CBA6F7">  return</span><span style="color:#CDD6F4"> (</span></span>
<span class="line"><span style="color:#94E2D5">    &#x3C;</span><span style="color:#89B4FA">section</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#94E2D5">      &#x3C;</span><span style="color:#F5C2E7">Header</span><span style="color:#94E2D5"> /></span></span>
<span class="line"><span style="color:#94E2D5">      &#x3C;</span><span style="color:#F5C2E7">Main</span><span style="color:#94E2D5"> /></span></span>
<span class="line"><span style="color:#94E2D5">      &#x3C;</span><span style="color:#F5C2E7">HydrationData</span><span style="color:#94E2D5"> /></span></span>
<span class="line"><span style="color:#94E2D5">    &#x3C;/</span><span style="color:#89B4FA">section</span><span style="color:#94E2D5">></span></span>
<span class="line"><span style="color:#CDD6F4">  )</span></span>
<span class="line"><span style="color:#9399B2">}</span></span>
<span class="line"></span></code></pre>
<h2 id="점진적-hydration---장단점">점진적 hydration - 장단점</h2>
<p>점진적 hydration은 hydration자체의 비용을 최소화하며 서버 사이드 렌더링과 클라이언트 사이드 hydration을 제공한다. 이로 인해 아래 정리된 이점을 얻는다.</p>
<ol>
<li>코드 스플리팅됨: 개별 컴포넌트들에 대하여 코드가 분리되어 지연 로딩되야 하기 때문에 코드 스플리팅은 점진적 hydration에 필수적인 기능이다.</li>
<li>자주 사용되지 않는 부분을 지연로딩 시킬 수 있다: 정적이거나 뷰포트를 벗어나 있거나 자주 사용되지 않는 컴포넌트들이 있을 수 있다. 이런 코드들은 지연로딩의 대상이 된다. 이런 컴포넌트를 hydration하는 코드 역시 페이지 로드 시점에 받을 필요가 없다. 대신 어떤 조건이 충족될 때 hydrate되도록 한다.</li>
<li>번들 사이즈를 감소시킨다: 코드 스플리팅으로 인해 번들 사이즈가 감소한다. 페이지를 로드할 때 실행되어야 하는 코드량이 줄어들어 FCP와 TTI간의 시간차가 줄어든다.</li>
</ol>
<p>단점으로는 점진적 hydration은 페이지 로드와 함께 페이지 내의 모든 요소들이 인터렉션 가능해야 하는 동적인 앱에는 적합하지 않다. 사용자가 어떤 부분에 인터렉션을 먼저 할 지 알 수 없어 hydration순서를 따로 정의할 수 없기 때문이다.</p> </div> </div>  </div> </div> </div>  </main> </body></html> 